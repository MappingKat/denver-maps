!function t(e,n,r){function o(u,a){if(!n[u]){if(!e[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[u]={exports:{}};e[u][0].call(l.exports,function(t){var n=e[u][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(t,e,n){!function(t){"use strict";t.version="1.5.5",t.hash=function(e){function n(){if(!f){var n=e.hash.substr(1);if(n!=r){var p=i;i=a.call(o,n),!i&&l.call(u,n)||!i&&c&&(i=c.call(o,p),o.write(!0),n=e.hash.substr(1));var d=t.diff(p,i);s.call(o,{url:n,data:i,previous:p,diff:d}),r=n}}}e||(e=window.location);var r,o={},i=null,u=t.format.path(),a=u.parse,s=function(){},c=t.functor(null),l=t.functor(!1),f=!1;return o.data=function(t){return arguments.length?(i=t,o):i},o.set=function(t){return"string"==typeof t?(e.hash=t,o):o.data(t).write()},o.update=function(e){return t.extend(i,e),o},o.write=function(t){return t&&(f=!0),e.hash=u(i),t&&(f=!1),o},o.read=function(){return n(),o},o.format=function(e){return arguments.length?("string"==typeof e&&(e=t.format(e)),u=e,"function"==typeof u.parse&&(a=u.parse),o):u},o.parse=function(t){return arguments.length?(a=t,o):a},o.url=function(e,n){return arguments.length||(e=i),n&&(e=t.extend({},i,e)),"#"+u(e)},o.enable=function(){return window.addEventListener("hashchange",n),o},o.disable=function(){return window.removeEventListener("hashchange",n),o},o.change=function(t){return arguments.length?(s=t,o):s},o.valid=function(e){return arguments.length?(l=t.functor(e),o):l},o.href=function(t){t.on("click.hashable",function(t){this.href=o.url(t)})},o.href.merge=function(t){t.on("click.hashable",function(t){this.href=o.url(t,!0)})},o.href.parse=function(t){return a(this.getAttribute("href").substr(1))},o.check=function(){return e.hash?o.read():(s.call(o,{previous:null,data:i||(i=c.call(o)),diff:t.diff({},i)}),o.write())},o["default"]=function(e){return arguments.length?(c=t.functor(e),o):c},o},t.validFragment=function(t){return!!document.getElementById(t)},t.format=function(e){var n=!1;e?"?"===e.charAt(e.length-1)&&(n=!0,e=e.substr(0,e.length-1)):e="";var r=[],o="([-\\w\\.]+)",i=new RegExp("{"+o+"}","g"),u=new RegExp("^"+e.replace(i,function(t,e){return r.push(e),o})+"$"),a=function(o){o||(o={});var u=e.replace(i,function(t,e){return o[e]});if(!n)return u;var a=Object.keys(o).filter(function(t){return-1===r.indexOf(t)});return a.length?[u,t.qs.format(t.copy(o,a))].join("?"):u};return a.match=function(t){return n&&(t=t.split("?",2)[0]),t.match(u)},a.parse=function(e){var o;if(n){var i=e.split("?",2);if(e=i[0],o=t.qs.parse(i[1]))if(Array.isArray(n))o=t.copy(o,n);else{var u=Object.keys(o).filter(function(t){return-1===r.indexOf(t)});o=t.copy(o,u)}}var s=a.match(e);if(s){var c={};return r.forEach(function(t,e){c[t]=s[e+1]}),o&&t.extend(c,o),c}return null},a.query=function(t){return arguments.length?(n=t,a):n},a.toString=function(){return e},a},t.format.path=function(){var e=function(e){e=t.extend({},e);var n=e.path||"";delete e.path;var r=t.qs.format(e);return r?[n,r].join("?"):n};return e.match=function(t){return!0},e.parse=function(e){var n=e.split("?",2),r={path:n[0]};if(n.length>1){var o=t.qs.parse(n[1]);if(o)return t.extend(r,o)}return r},e},t.format.map=function(e){var n=t.format(e||"{z}/{y}/{x}").query(!0),r=function(t){return Math.max(0,Math.ceil(Math.log(t)/Math.LN2))},o=function(e){if(e&&!t.empty(e.z)){var o=r(+e.z);e.x=(+e.x).toFixed(o),e.y=(+e.y).toFixed(o)}return n(e)};return o.match=function(t){return n.match(t)},o.parse=function(t){var e=n.parse(t);return e&&(e.z=+e.z,e.x=+e.x,e.y=+e.y,isNaN(e.z)||isNaN(e.x)||isNaN(e.y))?null:e},o.query=function(t){return arguments.length?(n.query(t),n):n.query()},o.precision=function(e){return arguments.length?(r=t.functor(e),o):r},o},t.qs=function(){function e(t){return encodeURIComponent(t).replace(/(\%[A-F0-9]{2})/g,function(t,e){return e in o?o[e]:e})}function n(t){return decodeURIComponent(t.replace(/\+/g," "))}var r={separator:"&"},o=r.replacements={"%20":"+","%2C":","};return r.parse=function(t){if(!t||"?"===t)return null;"?"===t.charAt(0)&&(t=t.substr(1));var e={};return t.split(r.separator).forEach(function(t){var r=t.split("="),o=n(r[0]),i=t.substr(o.length+1);1===r.length||"true"===i?e[o]=!0:"false"===i?e[o]=!1:e[o]=n(i)}),e},r.format=function(n,o){if("string"==typeof n)return n;if(null===n||"undefined"==typeof n)return"";var i=Object.keys(n).filter(function(e){return!t.empty(n[e])});o&&(i=i.sort(function(t,e){return t>e?1:e>t?-1:0}));var u=i.map(function(t){return n[t]===!0?t:[t,e(n[t])].join("=")});return u.length?u.join(r.separator):""},r}(),t.extend=function(t,e,n){return[].slice.call(arguments,1).forEach(function(e){if(e)for(var n in e)t[n]=e[n]}),t},t.diff=function(t,e){for(var n,r,o=Object.keys(t||{}),i=Object.keys(e||{}),u={};o.length;)n=o.shift(),r=i.indexOf(n),-1===r?u[n]={op:"remove",value:t[n]}:e[n]!=t[n]?(u[n]={op:"change",value:[t[n],e[n]]},i.splice(r,1)):i.splice(r,1);for(;i.length;)n=i.shift(),u[n]={op:"add",value:e[n]};return Object.keys(u).length>0?u:null},t.copy=function(t,e){var n={};return e.forEach(function(e){e in t&&(n[e]=t[e])}),n},t.empty=function(t){return null===t||"undefined"==typeof t||0===t.length},t.functor=function(t){return"function"==typeof t?t:function(){return t}},"object"==typeof L&&(L.Hash=L.hash=function(){var e,n,r,o=t.hash().format(t.format.map()).enable(),i=!1;return o.onAdd=function(t){o.change(function(e){var n=e.data;n&&(t.setView([n.y,n.x],n.z,i?null:{animate:!1}),i=!0,t.fireEvent("hashchange",e))})["default"](function(){return{z:t.getZoom(),x:t.getCenter().lng,y:t.getCenter().lat}}).enable(),t.on("moveend",e=function(){var e=t.getCenter();o.update({x:e.lng,y:e.lat}).write()}).on("zoomend",n=function(){var e=t.getZoom();o.update({z:e}).write()}).on("viewreset",r=function(){var e=t.getCenter(),n=t.getZoom();o.update({x:e.lng,y:e.lat,z:n}).write()})},o.onRemove=function(t){o.change(null).disable(),t.off("moveend",e).off("zoomend",n).off("viewreset",r)},o.addTo=function(t){return t.addLayer(o),o},o})}("object"==typeof e?e.exports:this.hashable={})},{}],2:[function(t,e,n){(function(r){function o(t,e,n,r){for(var o=-1,i=t.length;++o<i;){var u=t[o];e(r,u,n(u),t)}return r}function i(t){return t&&t.Object===Object?t:null}function u(t,e,n,r){return L(t,function(t,o,i){e(r,t,n(t),i)}),r}function a(t,e){e=v(e,t)?[e+""]:d(e);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:void 0}function s(t){var e=typeof t;return"function"==e?t:null==t?x:"object"==e?tt(t)?l(t[0],t[1]):c(t):E(t)}function c(t){var e=y(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(void 0!==r||n in Object(t))}}return function(n){return n===t||k(n,t,e)}}function l(t,e){return function(n){var r=A(n,t);return void 0===r&&r===e?S(n,t):O(e,r,void 0,F|T)}}function f(t){return function(e){return null==e?void 0:e[t]}}function p(t){return function(e){return a(e,t)}}function d(t){return tt(t)?t:g(t)}function h(t,e){return function(n,r){var i=tt(n)?o:u,a=e?e():{};return i(n,t,s(r),a)}}function y(t){for(var e=C(t),n=e.length;n--;)e[n][2]=m(e[n][1]);return e}function v(t,e){return"number"==typeof t?!0:!tt(t)&&(R.test(t)||!I.test(t)||null!=e&&t in Object(e))}function m(t){return t===t&&!b(t)}function g(t){var e=[];return j(t).replace(P,function(t,n,r,o){e.push(r?o.replace($,"$1"):n||t)}),e}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){return!!t&&"object"==typeof t}function w(t){return"symbol"==typeof t||_(t)&&K.call(t)==M}function j(t){if("string"==typeof t)return t;if(null==t)return"";if(w(t))return V?X.call(t):"";var e=t+"";return"0"==e&&1/t==-q?"-0":e}function x(t){return t}function E(t){return v(t)?f(t):p(t)}var L=t("lodash._baseeach"),O=t("lodash._baseisequal"),k=t("lodash._baseismatch"),A=t("lodash.get"),S=t("lodash.hasin"),C=t("lodash.topairs"),F=1,T=2,q=1/0,M="[object Symbol]",I=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/,P=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,$=/\\(\\)?/g,z={"function":!0,object:!0},N=z[typeof n]&&n&&!n.nodeType?n:null,U=z[typeof e]&&e&&!e.nodeType?e:null,B=i(N&&U&&"object"==typeof r&&r),D=i(z[typeof self]&&self),G=i(z[typeof window]&&window),H=i(z[typeof this]&&this),W=B||G!==(H&&H.window)&&G||D||H||Function("return this")(),Z=Object.prototype,J=Z.hasOwnProperty,K=Z.toString,V=W.Symbol,Y=V?V.prototype:void 0,X=V?Y.toString:void 0,Q=h(function(t,e,n){J.call(t,n)?t[n].push(e):t[n]=[e]}),tt=Array.isArray;e.exports=Q}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._baseeach":3,"lodash._baseisequal":5,"lodash._baseismatch":9,"lodash.get":12,"lodash.hasin":13,"lodash.topairs":15}],3:[function(t,e,n){function r(t,e){return t&&g(t,e,f)}function o(t){return function(e){return null==e?void 0:e[t]}}function i(t,e){return function(n,r){if(null==n)return n;if(!a(n))return t(n,r);for(var o=n.length,i=e?o:-1,u=Object(n);(e?i--:++i<o)&&r(u[i],i,u)!==!1;);return n}}function u(t){return function(e,n,r){for(var o=-1,i=Object(e),u=r(e),a=u.length;a--;){var s=u[t?a:++o];if(n(i[s],s,i)===!1)break}return e}}function a(t){return null!=t&&!("function"==typeof t&&s(t))&&c(b(t))}function s(t){var e=l(t)?v.call(t):"";return e==d||e==h}function c(t){return"number"==typeof t&&t>-1&&t%1==0&&p>=t}function l(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var f=t("lodash.keys"),p=9007199254740991,d="[object Function]",h="[object GeneratorFunction]",y=Object.prototype,v=y.toString,m=i(r),g=u(),b=o("length");e.exports=m},{"lodash.keys":4}],4:[function(t,e,n){function r(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function o(t,e){return t="number"==typeof t||E.test(t)?+t:-1,e=null==e?b:e,t>-1&&t%1==0&&e>t}function i(t,e){return O.call(t,e)||"object"==typeof t&&e in t&&null===A(t)}function u(t){return C(Object(t))}function a(t){return function(e){return null==e?void 0:e[t]}}function s(t){var e=t?t.length:void 0;return h(e)&&(T(t)||m(t)||l(t))?r(e,String):null}function c(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||L;return t===n}function l(t){return p(t)&&O.call(t,"callee")&&(!S.call(t,"callee")||k.call(t)==_)}function f(t){return null!=t&&!("function"==typeof t&&d(t))&&h(F(t))}function p(t){return v(t)&&f(t)}function d(t){var e=y(t)?k.call(t):"";return e==w||e==j}function h(t){return"number"==typeof t&&t>-1&&t%1==0&&b>=t}function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function v(t){return!!t&&"object"==typeof t}function m(t){return"string"==typeof t||!T(t)&&v(t)&&k.call(t)==x}function g(t){var e=c(t);if(!e&&!f(t))return u(t);var n=s(t),r=!!n,a=n||[],l=a.length;for(var p in t)!i(t,p)||r&&("length"==p||o(p,l))||e&&"constructor"==p||a.push(p);return a}var b=9007199254740991,_="[object Arguments]",w="[object Function]",j="[object GeneratorFunction]",x="[object String]",E=/^(?:0|[1-9]\d*)$/,L=Object.prototype,O=L.hasOwnProperty,k=L.toString,A=Object.getPrototypeOf,S=L.propertyIsEnumerable,C=Object.keys,F=a("length"),T=Array.isArray;e.exports=g},{}],5:[function(t,e,n){(function(r){function o(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function i(t){return t&&t.Object===Object?t:null}function u(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function a(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function s(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function c(t,e){return pt.call(t,e)||"object"==typeof t&&e in t&&null===mt(t)}function l(t,e,n,r,o){return t===e?!0:null==t||null==e||!b(t)&&!_(e)?t!==t&&e!==e:f(t,e,l,n,r,o)}function f(t,e,n,r,o,i){var a=Et(t),s=Et(e),c=S,l=S;a||(c=v(t),c==A?c=P:c!=P&&(a=j(t))),s||(l=v(e),l==A?l=P:l!=P&&(s=j(e)));var f=c==P&&!u(t),y=l==P&&!u(e),m=c==l;if(m&&!a&&!f)return d(t,e,c,n,r,o);var g=o&O;if(!g){var b=f&&pt.call(t,"__wrapped__"),_=y&&pt.call(e,"__wrapped__");if(b||_)return n(b?t.value():t,_?e.value():e,r,o,i)}return m?(i||(i=new x),(a?p:h)(t,e,n,r,o,i)):!1}function p(t,e,n,r,i,u){var a=-1,s=i&O,c=i&L,l=t.length,f=e.length;if(l!=f&&!(s&&f>l))return!1;var p=u.get(t);if(p)return p==e;var d=!0;for(u.set(t,e);++a<l;){var h=t[a],y=e[a];if(r)var v=s?r(y,h,a,e,t,u):r(h,y,a,t,e,u);if(void 0!==v){if(v)continue;d=!1;break}if(c){if(!o(e,function(t){return h===t||n(h,t,r,i,u)})){d=!1;break}}else if(h!==y&&!n(h,y,r,i,u)){d=!1;break}}return u["delete"](t),d}function d(t,e,n,r,o,i){switch(n){case D:return t.byteLength==e.byteLength&&r(new vt(t),new vt(e))?!0:!1;case C:case F:return+t==+e;case T:return t.name==e.name&&t.message==e.message;case R:return t!=+t?e!=+e:t==+e;case $:case N:return t==e+"";case I:var u=a;case z:var c=i&O;return u||(u=s),(c||t.size==e.size)&&r(u(t),u(e),o,i|L);case U:return!!yt&&xt.call(t)==xt.call(e)}return!1}function h(t,e,n,r,o,i){var u=o&O,a=E(t),s=a.length,l=E(e),f=l.length;if(s!=f&&!u)return!1;for(var p=s;p--;){var d=a[p];if(!(u?d in e:c(e,d)))return!1}var h=i.get(t);if(h)return h==e;var y=!0;i.set(t,e);for(var v=u;++p<s;){d=a[p];var m=t[d],g=e[d];if(r)var b=u?r(g,m,d,e,t,i):r(m,g,d,t,e,i);if(!(void 0===b?m===g||n(m,g,r,o,i):b)){y=!1;break}v||(v="constructor"==d)}if(y&&!v){var _=t.constructor,w=e.constructor;_!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(y=!1)}return i["delete"](t),y}function y(t,e){var n=null==t?void 0:t[e];return w(n)?n:void 0}function v(t){return dt.call(t)}function m(t){var e=b(t)?dt.call(t):"";return e==q||e==M}function g(t){return"number"==typeof t&&t>-1&&t%1==0&&k>=t}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){return!!t&&"object"==typeof t}function w(t){return null==t?!1:m(t)?ht.test(ft.call(t)):_(t)&&(u(t)?ht:tt).test(t)}function j(t){return _(t)&&g(t.length)&&!!et[dt.call(t)]}var x=t("lodash._stack"),E=t("lodash.keys"),L=1,O=2,k=9007199254740991,A="[object Arguments]",S="[object Array]",C="[object Boolean]",F="[object Date]",T="[object Error]",q="[object Function]",M="[object GeneratorFunction]",I="[object Map]",R="[object Number]",P="[object Object]",$="[object RegExp]",z="[object Set]",N="[object String]",U="[object Symbol]",B="[object WeakMap]",D="[object ArrayBuffer]",G="[object Float32Array]",H="[object Float64Array]",W="[object Int8Array]",Z="[object Int16Array]",J="[object Int32Array]",K="[object Uint8Array]",V="[object Uint8ClampedArray]",Y="[object Uint16Array]",X="[object Uint32Array]",Q=/[\\^$.*+?()[\]{}|]/g,tt=/^\[object .+?Constructor\]$/,et={};et[G]=et[H]=et[W]=et[Z]=et[J]=et[K]=et[V]=et[Y]=et[X]=!0,et[A]=et[S]=et[D]=et[C]=et[F]=et[T]=et[q]=et[I]=et[R]=et[P]=et[$]=et[z]=et[N]=et[B]=!1;var nt={"function":!0,object:!0},rt=nt[typeof n]&&n&&!n.nodeType?n:null,ot=nt[typeof e]&&e&&!e.nodeType?e:null,it=i(rt&&ot&&"object"==typeof r&&r),ut=i(nt[typeof self]&&self),at=i(nt[typeof window]&&window),st=i(nt[typeof this]&&this),ct=it||at!==(st&&st.window)&&at||ut||st||Function("return this")(),lt=Object.prototype,ft=Function.prototype.toString,pt=lt.hasOwnProperty,dt=lt.toString,ht=RegExp("^"+ft.call(pt).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=ct.Symbol,vt=ct.Uint8Array,mt=Object.getPrototypeOf,gt=y(ct,"Map"),bt=y(ct,"Set"),_t=gt?ft.call(gt):"",wt=bt?ft.call(bt):"",jt=yt?yt.prototype:void 0,xt=yt?jt.valueOf:void 0;(gt&&v(new gt)!=I||bt&&v(new bt)!=z)&&(v=function(t){var e=dt.call(t),n=e==P?t.constructor:null,r="function"==typeof n?ft.call(n):"";if(r){if(r==_t)return I;if(r==wt)return z}return e});var Et=Array.isArray;e.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._stack":6,"lodash.keys":8}],6:[function(t,e,n){function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function o(){this.__data__={array:[],map:null}}function i(t){var e=this.__data__,n=e.array;return n?c(n,t):e.map["delete"](t)}function u(t){var e=this.__data__,n=e.array;return n?l(n,t):e.map.get(t)}function a(t){var e=this.__data__,n=e.array;return n?f(n,t):e.map.has(t)}function s(t,e){var n=this.__data__,r=n.array;r&&(r.length<v-1?d(r,t,e):(n.array=null,n.map=new y(r)));var o=n.map;return o&&o.set(t,e),this}function c(t,e){var n=p(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():g.call(t,n,1),!0}function l(t,e){var n=p(t,e);return 0>n?void 0:t[n][1]}function f(t,e){return p(t,e)>-1}function p(t,e){for(var n=t.length;n--;)if(h(t[n][0],e))return n;return-1}function d(t,e,n){var r=p(t,e);0>r?t.push([e,n]):t[r][1]=n}function h(t,e){return t===e||t!==t&&e!==e}var y=t("lodash._mapcache"),v=200,m=Array.prototype,g=m.splice;r.prototype.clear=o,r.prototype["delete"]=i,r.prototype.get=u,r.prototype.has=a,r.prototype.set=s,e.exports=r},{"lodash._mapcache":7}],7:[function(t,e,n){(function(t){function r(t){return t&&t.Object===Object?t:null}function o(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function i(){}function u(t,e){return s(t,e)&&delete t[e]}function a(t,e){if(K){var n=t[e];return n===A?void 0:n}return G.call(t,e)?t[e]:void 0}function s(t,e){return K?void 0!==t[e]:G.call(t,e)}function c(t,e,n){t[e]=K&&void 0===n?A:n}function l(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function f(){this.__data__={hash:new i,map:J?new J:[],string:new i}}function p(t){var e=this.__data__;return j(t)?u("string"==typeof t?e.string:e.hash,t):J?e.map["delete"](t):v(e.map,t)}function d(t){var e=this.__data__;return j(t)?a("string"==typeof t?e.string:e.hash,t):J?e.map.get(t):m(e.map,t)}function h(t){var e=this.__data__;return j(t)?s("string"==typeof t?e.string:e.hash,t):J?e.map.has(t):g(e.map,t)}function y(t,e){var n=this.__data__;return j(t)?c("string"==typeof t?n.string:n.hash,t,e):J?n.map.set(t,e):_(n.map,t,e),this}function v(t,e){var n=b(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():Z.call(t,n,1),!0}function m(t,e){var n=b(t,e);return 0>n?void 0:t[n][1]}function g(t,e){return b(t,e)>-1}function b(t,e){for(var n=t.length;n--;)if(x(t[n][0],e))return n;return-1}function _(t,e,n){var r=b(t,e);0>r?t.push([e,n]):t[r][1]=n}function w(t,e){var n=null==t?void 0:t[e];return k(n)?n:void 0}function j(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!==t||null==t}function x(t,e){return t===e||t!==t&&e!==e}function E(t){var e=L(t)?H.call(t):"";return e==S||e==C}function L(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function O(t){return!!t&&"object"==typeof t}function k(t){return null==t?!1:E(t)?W.test(D.call(t)):O(t)&&(o(t)?W:T).test(t)}var A="__lodash_hash_undefined__",S="[object Function]",C="[object GeneratorFunction]",F=/[\\^$.*+?()[\]{}|]/g,T=/^\[object .+?Constructor\]$/,q={"function":!0,object:!0},M=q[typeof n]&&n&&!n.nodeType?n:null,I=q[typeof e]&&e&&!e.nodeType?e:null,R=r(M&&I&&"object"==typeof t&&t),P=r(q[typeof self]&&self),$=r(q[typeof window]&&window),z=r(q[typeof this]&&this),N=R||$!==(z&&z.window)&&$||P||z||Function("return this")(),U=Array.prototype,B=Object.prototype,D=Function.prototype.toString,G=B.hasOwnProperty,H=B.toString,W=RegExp("^"+D.call(G).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z=U.splice,J=w(N,"Map"),K=w(Object,"create");i.prototype=K?K(null):B,l.prototype.clear=f,l.prototype["delete"]=p,l.prototype.get=d,l.prototype.has=h,l.prototype.set=y,e.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],9:[function(t,e,n){function r(t,e,n,r){var s=n.length,c=s,l=!r;if(null==t)return!c;for(t=Object(t);s--;){var f=n[s];if(l&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++s<c;){f=n[s];var p=f[0],d=t[p],h=f[1];if(l&&f[2]){if(void 0===d&&!(p in t))return!1}else{var y=new o,v=r?r(d,h,p,t,e,y):void 0;if(!(void 0===v?i(h,d,r,u|a,y):v))return!1}}return!0}var o=t("lodash._stack"),i=t("lodash._baseisequal"),u=1,a=2;e.exports=r},{"lodash._baseisequal":5,"lodash._stack":10}],10:[function(t,e,n){arguments[4][6][0].apply(n,arguments)},{dup:6,"lodash._mapcache":11}],11:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],12:[function(t,e,n){(function(t){function r(t){return t&&t.Object===Object?t:null}function o(t,e){e=u(e,t)?[e+""]:i(e);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:void 0}function i(t){return F(t)?t:a(t)}function u(t,e){return"number"==typeof t?!0:!F(t)&&(y.test(t)||!h.test(t)||null!=e&&t in Object(e))}function a(t){var e=[];return l(t).replace(v,function(t,n,r,o){e.push(r?o.replace(m,"$1"):n||t)}),e}function s(t){return!!t&&"object"==typeof t}function c(t){return"symbol"==typeof t||s(t)&&k.call(t)==d}function l(t){if("string"==typeof t)return t;if(null==t)return"";if(c(t))return A?C.call(t):"";var e=t+"";return"0"==e&&1/t==-p?"-0":e}function f(t,e,n){var r=null==t?void 0:o(t,e);return void 0===r?n:r}var p=1/0,d="[object Symbol]",h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,y=/^\w*$/,v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,m=/\\(\\)?/g,g={"function":!0,object:!0},b=g[typeof n]&&n&&!n.nodeType?n:null,_=g[typeof e]&&e&&!e.nodeType?e:null,w=r(b&&_&&"object"==typeof t&&t),j=r(g[typeof self]&&self),x=r(g[typeof window]&&window),E=r(g[typeof this]&&this),L=w||x!==(E&&E.window)&&x||j||E||Function("return this")(),O=Object.prototype,k=O.toString,A=L.Symbol,S=A?A.prototype:void 0,C=A?S.toString:void 0,F=Array.isArray;e.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(t,e,n){(function(r){function o(t){return t&&t.Object===Object?t:null}function i(t,e){return t="number"==typeof t||$.test(t)?+t:-1,e=null==e?A:e,t>-1&&t%1==0&&e>t}function u(t,e){return e in Object(t)}function a(t){return function(e){return null==e?void 0:e[t]}}function s(t){return et(t)?t:p(t)}function c(t,e,n){if(null==t)return!1;var r=n(t,e);r||l(e)||(e=s(e),t=f(t,e),null!=t&&(e=d(e),r=n(t,e)));var o=t?t.length:void 0;return r||!!o&&g(o)&&i(e,o)&&(et(t)||w(t)||h(t))}function l(t,e){return"number"==typeof t?!0:!et(t)&&(I.test(t)||!M.test(t)||null!=e&&t in Object(e))}function f(t,e){return 1==e.length?t:O(t,L(e,0,-1))}function p(t){var e=[];return x(t).replace(R,function(t,n,r,o){e.push(r?o.replace(P,"$1"):n||t)}),e}function d(t){var e=t?t.length:0;return e?t[e-1]:void 0}function h(t){return v(t)&&J.call(t,"callee")&&(!Y.call(t,"callee")||K.call(t)==S)}function y(t){return null!=t&&!("function"==typeof t&&m(t))&&g(tt(t))}function v(t){return _(t)&&y(t)}function m(t){var e=b(t)?K.call(t):"";return e==C||e==F}function g(t){return"number"==typeof t&&t>-1&&t%1==0&&A>=t}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){return!!t&&"object"==typeof t}function w(t){return"string"==typeof t||!et(t)&&_(t)&&K.call(t)==T}function j(t){return"symbol"==typeof t||_(t)&&K.call(t)==q}function x(t){if("string"==typeof t)return t;if(null==t)return"";if(j(t))return V?Q.call(t):"";var e=t+"";return"0"==e&&1/t==-k?"-0":e}function E(t,e){return c(t,e,u)}var L=t("lodash._baseslice"),O=t("lodash.get"),k=1/0,A=9007199254740991,S="[object Arguments]",C="[object Function]",F="[object GeneratorFunction]",T="[object String]",q="[object Symbol]",M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,I=/^\w*$/,R=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,P=/\\(\\)?/g,$=/^(?:0|[1-9]\d*)$/,z={"function":!0,object:!0},N=z[typeof n]&&n&&!n.nodeType?n:null,U=z[typeof e]&&e&&!e.nodeType?e:null,B=o(N&&U&&"object"==typeof r&&r),D=o(z[typeof self]&&self),G=o(z[typeof window]&&window),H=o(z[typeof this]&&this),W=B||G!==(H&&H.window)&&G||D||H||Function("return this")(),Z=Object.prototype,J=Z.hasOwnProperty,K=Z.toString,V=W.Symbol,Y=Z.propertyIsEnumerable,X=V?V.prototype:void 0,Q=V?X.toString:void 0,tt=a("length"),et=Array.isArray;e.exports=E}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._baseslice":14,"lodash.get":12}],14:[function(t,e,n){function r(t,e,n){var r=-1,o=t.length;0>e&&(e=-e>o?0:o+e),n=n>o?o:n,0>n&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}e.exports=r},{}],15:[function(t,e,n){function r(t,e){return i(e,function(e){return[e,t[e]]})}function o(t){return r(t,u(t))}var i=t("lodash._arraymap"),u=t("lodash.keys");e.exports=o},{"lodash._arraymap":16,"lodash.keys":17}],16:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}e.exports=r},{}],17:[function(t,e,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],18:[function(t,e,n){(function(r){function o(t,e,n){var r=n.length;switch(r){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function i(t,e){return j(e,function(e){return t[e]})}function u(t){return t&&t.Object===Object?t:null}function a(t){return"\\"+B[t]}function s(t,e){return t="number"==typeof t||$.test(t)?+t:-1,e=null==e?S:e,t>-1&&t%1==0&&e>t}function c(t,e,n,r){return void 0===t||p(t,V[n])&&!Y.call(r,n)?e:t}function l(t){return function(e){return null==e?void 0:e[t]}}function f(t,e,n){if(!m(n))return!1;var r=typeof e;return("number"==r?d(n)&&s(e,n.length):"string"==r&&e in n)?p(n[e],t):!1}function p(t,e){return t===e||t!==t&&e!==e}function d(t){return null!=t&&!("function"==typeof t&&y(t))&&v(nt(t))}function h(t){return g(t)&&"string"==typeof t.message&&X.call(t)==C}function y(t){var e=m(t)?X.call(t):"";return e==F||e==T}function v(t){return"number"==typeof t&&t>-1&&t%1==0&&S>=t}function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function b(t){return"symbol"==typeof t||g(t)&&X.call(t)==q}function _(t){if("string"==typeof t)return t;if(null==t)return"";if(b(t))return Q?et.call(t):"";var e=t+"";return"0"==e&&1/t==-A?"-0":e}function w(t,e,n){var r=k.imports._.templateSettings||k;n&&f(t,e,n)&&(e=void 0),t=_(t),e=x({},e,r,c);var o,u,s=x({},e.imports,r.imports,c),l=E(s),p=i(s,l),d=0,y=e.interpolate||z,v="__p += '",m=RegExp((e.escape||z).source+"|"+y.source+"|"+(y===L?P:z).source+"|"+(e.evaluate||z).source+"|$","g"),g="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";t.replace(m,function(e,n,r,i,s,c){return r||(r=i),v+=t.slice(d,c).replace(N,a),n&&(o=!0,v+="' +\n__e("+n+") +\n'"),s&&(u=!0,v+="';\n"+s+";\n__p += '"),r&&(v+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=c+e.length,e}),v+="';\n";var b=e.variable;b||(v="with (obj) {\n"+v+"\n}\n"),v=(u?v.replace(M,""):v).replace(I,"$1").replace(R,"$1;"),v="function("+(b||"obj")+") {\n"+(b?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+v+"return __p\n}";var w=rt(function(){return Function(l,g+"return "+v).apply(void 0,p)});if(w.source=v,h(w))throw w;return w}var j=t("lodash._arraymap"),x=t("lodash.assigninwith"),E=t("lodash.keys"),L=t("lodash._reinterpolate"),O=t("lodash.rest"),k=t("lodash.templatesettings"),A=1/0,S=9007199254740991,C="[object Error]",F="[object Function]",T="[object GeneratorFunction]",q="[object Symbol]",M=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,P=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$=/^(?:0|[1-9]\d*)$/,z=/($^)/,N=/['\n\r\u2028\u2029\\]/g,U={"function":!0,object:!0},B={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},D=U[typeof n]&&n&&!n.nodeType?n:null,G=U[typeof e]&&e&&!e.nodeType?e:null,H=u(D&&G&&"object"==typeof r&&r),W=u(U[typeof self]&&self),Z=u(U[typeof window]&&window),J=u(U[typeof this]&&this),K=H||Z!==(J&&J.window)&&Z||W||J||Function("return this")(),V=Object.prototype,Y=V.hasOwnProperty,X=V.toString,Q=K.Symbol,tt=Q?Q.prototype:void 0,et=Q?tt.toString:void 0,nt=l("length"),rt=O(function(t,e){try{return o(t,void 0,e)}catch(n){return m(n)?n:new Error(n)}});e.exports=w}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arraymap":19,"lodash._reinterpolate":20,"lodash.assigninwith":21,"lodash.keys":23,"lodash.rest":24,"lodash.templatesettings":25}],19:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],20:[function(t,e,n){var r=/<%=([\s\S]+?)%>/g;e.exports=r},{}],21:[function(t,e,n){function r(t,e){return t="number"==typeof t||b.test(t)?+t:-1,e=null==e?v:e,t>-1&&t%1==0&&e>t}function o(t,e,n){var r=t[e];(!c(r,n)||c(r,_[e])&&!w.call(t,e)||void 0===n&&!(e in t))&&(t[e]=n)}function i(t){return function(e){return null==e?void 0:e[t]}}function u(t,e,n,r){n||(n={});for(var i=-1,u=e.length;++i<u;){var a=e[i],s=r?r(n[a],t[a],a,n,t):t[a];o(n,a,s)}return n}function a(t){return y(function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,u=o>2?n[2]:void 0;for(i="function"==typeof i?(o--,i):void 0,u&&s(n[0],n[1],u)&&(i=3>o?void 0:i,o=1),e=Object(e);++r<o;){var a=n[r];a&&t(e,a,r,i)}return e})}function s(t,e,n){if(!d(n))return!1;var o=typeof e;return("number"==o?l(n)&&r(e,n.length):"string"==o&&e in n)?c(n[e],t):!1}function c(t,e){return t===e||t!==t&&e!==e}function l(t){return null!=t&&!("function"==typeof t&&f(t))&&p(x(t))}function f(t){var e=d(t)?j.call(t):"";return e==m||e==g}function p(t){return"number"==typeof t&&t>-1&&t%1==0&&v>=t}function d(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var h=t("lodash.keysin"),y=t("lodash.rest"),v=9007199254740991,m="[object Function]",g="[object GeneratorFunction]",b=/^(?:0|[1-9]\d*)$/,_=Object.prototype,w=_.hasOwnProperty,j=_.toString,x=i("length"),E=a(function(t,e,n,r){u(e,h(e),t,r)});e.exports=E},{"lodash.keysin":22,"lodash.rest":24}],22:[function(t,e,n){(function(t){function r(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function o(t){return t&&t.Object===Object?t:null}function i(t,e){return t="number"==typeof t||L.test(t)?+t:-1,e=null==e?_:e,t>-1&&t%1==0&&e>t}function u(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function a(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}function s(t){return function(e){return null==e?void 0:e[t]}}function c(t){var e=t?t.length:void 0;return y(e)&&(U(t)||g(t)||f(t))?r(e,String):null}function l(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||M;return t===n}function f(t){return d(t)&&I.call(t,"callee")&&(!z.call(t,"callee")||R.call(t)==w)}function p(t){return null!=t&&!("function"==typeof t&&h(t))&&y(N(t))}function d(t){return m(t)&&p(t)}function h(t){var e=v(t)?R.call(t):"";return e==j||e==x}function y(t){return"number"==typeof t&&t>-1&&t%1==0&&_>=t}function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){return!!t&&"object"==typeof t}function g(t){return"string"==typeof t||!U(t)&&m(t)&&R.call(t)==E}function b(t){for(var e=-1,n=l(t),r=a(t),o=r.length,u=c(t),s=!!u,f=u||[],p=f.length;++e<o;){var d=r[e];s&&("length"==d||i(d,p))||"constructor"==d&&(n||!I.call(t,d))||f.push(d)}return f}var _=9007199254740991,w="[object Arguments]",j="[object Function]",x="[object GeneratorFunction]",E="[object String]",L=/^(?:0|[1-9]\d*)$/,O={"function":!0,object:!0},k=O[typeof n]&&n&&!n.nodeType?n:null,A=O[typeof e]&&e&&!e.nodeType?e:null,S=o(k&&A&&"object"==typeof t&&t),C=o(O[typeof self]&&self),F=o(O[typeof window]&&window),T=o(O[typeof this]&&this),q=S||F!==(T&&T.window)&&F||C||T||Function("return this")(),M=Object.prototype,I=M.hasOwnProperty,R=M.toString,P=q.Reflect,$=P?P.enumerate:void 0,z=M.propertyIsEnumerable;$&&!z.call({valueOf:1},"valueOf")&&(a=function(t){return u($(t))});var N=s("length"),U=Array.isArray;e.exports=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{}],23:[function(t,e,n){arguments[4][4][0].apply(n,arguments)},{dup:4}],24:[function(t,e,n){function r(t,e,n){var r=n.length;switch(r){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function o(t,e){if("function"!=typeof t)throw new TypeError(c);return e=j(void 0===e?t.length-1:a(e),0),function(){for(var n=arguments,o=-1,i=j(n.length-e,0),u=Array(i);++o<i;)u[o]=n[e+o];switch(e){case 0:return t.call(this,u);case 1:return t.call(this,n[0],u);case 2:return t.call(this,n[0],n[1],u)}var a=Array(e+1);for(o=-1;++o<e;)a[o]=n[o];return a[e]=u,r(t,this,a)}}function i(t){var e=u(t)?w.call(t):"";return e==d||e==h}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){if(!t)return 0===t?t:0;if(t=s(t),t===l||t===-l){var e=0>t?-1:1;return e*f}var n=t%1;return t===t?n?t-n:t:0}function s(t){if(u(t)){var e=i(t.valueOf)?t.valueOf():t;t=u(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(y,"");var n=m.test(t);return n||g.test(t)?b(t.slice(2),n?2:8):v.test(t)?p:+t}var c="Expected a function",l=1/0,f=1.7976931348623157e308,p=NaN,d="[object Function]",h="[object GeneratorFunction]",y=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,g=/^0o[0-7]+$/i,b=parseInt,_=Object.prototype,w=_.toString,j=Math.max;e.exports=o},{}],25:[function(t,e,n){var r=t("lodash.escape"),o=t("lodash._reinterpolate"),i=/<%-([\s\S]+?)%>/g,u=/<%([\s\S]+?)%>/g,a={escape:i,evaluate:u,interpolate:o,variable:"",imports:{_:{escape:r}}};e.exports=a},{"lodash._reinterpolate":20,"lodash.escape":26}],26:[function(t,e,n){(function(t){function r(t){return t&&t.Object===Object?t:null}function o(t){return d[t]}function i(t){return!!t&&"object"==typeof t}function u(t){return"symbol"==typeof t||i(t)&&x.call(t)==l}function a(t){if("string"==typeof t)return t;if(null==t)return"";if(u(t))return E?O.call(t):"";var e=t+"";return"0"==e&&1/t==-c?"-0":e}function s(t){return t=a(t),t&&p.test(t)?t.replace(f,o):t}var c=1/0,l="[object Symbol]",f=/[&<>"'`]/g,p=RegExp(f.source),d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},h={"function":!0,object:!0},y=h[typeof n]&&n&&!n.nodeType?n:null,v=h[typeof e]&&e&&!e.nodeType?e:null,m=r(y&&v&&"object"==typeof t&&t),g=r(h[typeof self]&&self),b=r(h[typeof window]&&window),_=r(h[typeof this]&&this),w=m||b!==(_&&_.window)&&b||g||_||Function("return this")(),j=Object.prototype,x=j.toString,E=w.Symbol,L=E?E.prototype:void 0,O=E?L.toString:void 0;e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(t,e,n){function r(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)o.call(n,r)&&(t[r]=n[r])}return t}e.exports=r;var o=Object.prototype.hasOwnProperty},{}],28:[function(t,e,n){"use strict";function r(t){for(var e in t)"function"==typeof t[e]&&0===e.indexOf("_on")&&(t[e]=t[e].bind(t))}var o=t("events").EventEmitter,i=function(t,e){e=e||{},this._innerRadius=e.innerRadius||30,this._radius=e.radius||100,this._fillRadius=e.fillRadius||"rgba(0,0,0,0.1)",this._fill=e.fill||"rgba(0,0,0,0.1)",this._stroke=e.stroke||"rgba(0,0,0,0.1)",this._strokeWidth=e.strokeWidth||3,this._x=e.position?e.position.x:0,this._y=e.position?e.position.y:0,this._container=t,this._el=null,this._ev=new o,r(this)};i.prototype._getCoordFromEvent=function(t){var e=this._container.getBoundingClientRect();return t=t.touches?t.touches[0]:t,{x:t.clientX-e.left-this._innerRadius/2,y:t.clientY-e.top-this._innerRadius/2}},i.prototype._onDown=function(t){this._active||(t.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("keydown",this._onKeyDown)),this._active=!1,this._startPixel=this._getCoordFromEvent(t),this._el.classList.contains("active")||this._el.classList.add("active"),this.fire("start",{start:this._startPixel}))},i.prototype._onKeyDown=function(t){27===t.keyCode&&(this._active=!1,this.clear())},i.prototype.draw=function(){return this._el||(this._el=document.createElement("div"),this._el.className="mapboxgl-radius-browser",this._container.appendChild(this._el)),this._el.style.backgroundColor=this._fill,this._el.style.borderStyle="solid",this._el.style.borderColor=this._stroke,this._el.style.borderWidth=this._strokeWidth+"px",this._el.style.borderRadius="50%",this._el.style.display="absolute",this._el.style.boxShadow="0 0 0 "+(this._radius-this._innerRadius/2)+"px "+this._fillRadius,this._el.style.top=0,this._el.style.left=0,this._el.style.width=this._innerRadius+"px",this._el.style.height=this._innerRadius+"px",this._setPosition(),this},i.prototype._setPosition=function(t){t&&(this._x=t.x,this._y=t.y);var e="translate("+this._x+"px,"+this._y+"px)";this._el.style.transform=e,this._el.style.WebkitTransform=e},i.prototype._onMove=function(t){this._active||(this._active=!0),this._el||this.draw(),this._currentPixel=this._getCoordFromEvent(t),this._setPosition(this._currentPixel),this.fire("move",{start:this._startPixel,current:this._currentPixel}),t.preventDefault()},i.prototype._onTouchEnd=function(t){this._onUp(t),document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd)},i.prototype._onMouseUp=function(t){this._onUp(t),document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("keydown",this._onKeyDown)},i.prototype._onUp=function(t){this._active&&(this._el.classList.contains("active")&&this._el.classList.remove("active"),this._active=!1,this.fire("result",{start:this._startPixel,end:this._getCoordFromEvent(t)}))},i.prototype.clear=function(){return this._el&&(this._el.parentElement.removeChild(this._el),this._el=null),this},i.prototype.enable=function(){return this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this},i.prototype.disable=function(){return this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this},i.prototype.setFill=function(t){return this._fill=t,this.draw(),this},i.prototype.setRadius=function(t){return this._radius=t,this.draw(),this},i.prototype.setInnerRadius=function(t){return this._innerRadius=t,this.draw(),this},i.prototype.setRadiusFill=function(t){return this._fillRadius=t,this.draw(),this},i.prototype.setStroke=function(t){return this._stroke=t,this.draw(),this},i.prototype.setStrokeWidth=function(t){return this._strokeWidth=t,this.draw(),this},i.prototype.on=function(t,e){return this._ev.on(t,e),this},i.prototype.fire=function(t,e){return this._ev.emit(t,e),this},i.prototype.off=function(t,e){return this._ev.removeListener(t,e),this},"undefined"!=typeof e&&e.exports?e.exports=i:window.Circle=i},{events:30}],29:[function(t,e,n){"use strict";function r(t){document.getElementById("sidebar").classList.toggle("loading",t)}function o(t){r(!1),window.clearTimeout(k);var e=document.getElementById("error");e.classList.add("pad1","active"),e.textContent=t,k=window.setTimeout(function(){e.classList.remove("pad1","active"),e.textContent=""},3e3)}function i(){document.body.classList.remove("loading");var t=document.createElement("a");t.href="https://www.opendataphilly.org/dataset/opa-property-assessments",t.className="fill-darken2 pad0x inline fr color-white",t.target="_target",t.textContent="Data provided by OpenDataPhilly",O.getContainer().querySelector(".mapboxgl-ctrl-bottom-right").appendChild(t),O.addSource("philly",{type:"vector",url:"mapbox://mapbox.13m9czcc"}),O.addLayer({id:"philly",type:"circle",source:"philly",interactive:!0,"source-layer":"original",paint:{"circle-radius":0}}),O.addSource("within",{type:"geojson",data:P}),$.forEach(function(t,e){var n="poi-"+e;O.addLayer({id:n,interactive:!0,type:"circle",source:"within",layout:{visibility:j.exclude.indexOf(e)>=0?"none":"visible"},paint:{"circle-color":t[1],"circle-radius":{base:1,stops:[[13,1],[15,1.5],[17,3]]}},filter:["==","category",t[0]]},"road-label-sm");var r=document.createElement("input");r.type="checkbox",r.id=n,r.checked=j.exclude.indexOf(e)>=0?!1:!0,C.appendChild(r);var o=document.createElement("label");o.className="button col12",o.setAttribute("for",n),o.textContent=t[2];var i=document.createElement("span");i.style.backgroundColor=t[1],o.appendChild(i),C.appendChild(o),r.addEventListener("change",function(t){t.target.checked&&j.exclude.indexOf(e)>=0?j.exclude.splice(j.exclude.indexOf(e),1):j.exclude.push(e),u({exclude:j.exclude}),O.setLayoutProperty(n,"visibility",t.target.checked?"visible":"none"),a(P.features)})}),A.querySelector("input").value=j.radius,d(j.radius)}function u(t){j=b({},j,t),_.set(j)}function a(t){F.innerHTML="",j.exclude.length&&(t=t.filter(function(t){return-1===j.exclude.indexOf(t.properties.category)})),t=v(t,function(t){return t.properties.category});for(var e in t){var n="#ddd",o=document.createElement("div");if(o.className="property-group",o.setAttribute("data-properties",t[e].length),$.forEach(function(t){t[0]===parseInt(e,10)&&(n=t[1],o.setAttribute("data-fill",t[1]),o.setAttribute("data-category",t[2]))}),e===Object.keys(t)[0])l(T,o);else{var i=document.createElement("header");i.className="pad2x pad1y",l(i,o),o.appendChild(i)}t[e].forEach(function(t){t.fill=n;var e=document.createElement("div");e.innerHTML=E(t),o.appendChild(e),e.querySelector("button").addEventListener("click",function(e){var n=F.querySelectorAll("button");Array.prototype.forEach.call(n,function(t){t.classList.remove("active")}),e.target.classList.add("active"),c(t)}),e.querySelector("button").addEventListener("mouseover",function(){c(t)})}),F.appendChild(o),r(!1)}}function s(t){var e;return $.forEach(function(n){n[0]===t.properties.category&&(e=n[1])}),e}function c(t){R.remove().setLngLat(t.geometry.coordinates).setHTML(L(t)).addTo(O)}function l(t,e){var n=e.getAttribute("data-properties"),r=e.getAttribute("data-category"),o=e.getAttribute("data-fill"),i=document.createElement("strong");i.className="small quiet space-right0",i.textContent=r;var u=parseInt(n,10),a=document.createElement("strong");a.className="small dark",a.textContent=u.toLocaleString()+" properties",t.innerHTML="",t.style.backgroundColor=o,t.appendChild(i),t.appendChild(a)}function f(t){if(R.remove(),r(!0),T.innerHTML=F.innerHTML="",O.dragPan.enable(),t&&t.end){M={x:t.end.x+q/2,y:t.end.y+q/2};var e=O.unproject(M);u({center:[e.lng,e.lat]})}var n=parseInt(j.radius,10),i=new mapboxgl.Point(M.x+n,M.y-n),s=new mapboxgl.Point(M.x-n,M.y+n);O.featuresIn([i,s],{includeGeometry:!0,layer:"philly"},function(t,e){if(t)return o(t.message);if(!e.length)return o("No properties found");var n=O.unproject(M),r=h(parseInt(j.radius,10),M).miles,i=P.features=e.filter(function(t){return m(t,g([n.lng,n.lat]),"miles")<r}).map(function(t,e){return t.properties.id=e,t});O.getSource("within").setData(P),a(i)})}function p(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}function d(t){var e=h(t,M);S.textContent=e.miles>1?e.miles.toFixed(1)+" mi.":e.meters.toFixed()+" m"}function h(t,e){var n=O.getZoom(),r=O.unproject(e).lat,o=2*Math.PI*6378137,i=Math.cos(r*Math.PI/180)*o/(512*Math.pow(2,n));return{meters:i*t,miles:i*t/1609.344}}mapboxgl.accessToken="pk.eyJ1IjoidHJpc3RlbiIsImEiOiJiUzBYOEJzIn0.VyXs9qNWgTfABLzSI3YcrQ";var y=(t("path"),t("lodash.template")),v=t("lodash.groupby"),m=t("turf-distance"),g=t("turf-point"),b=t("xtend"),_=t("hashable").hash(),w=t("./circle"),j={center:[-75.1759,39.9361],radius:100,exclude:[],zoom:15};_.change(function(t){var e=t.data;e.center&&(e.center=e.center.split(",").map(function(t){return parseFloat(t)})),e.exclude&&(e.exclude=e.exclude.split(",").map(function(t){return parseInt(t,10)})),e.zoom&&(e.zoom=parseFloat(e.zoom,10)),e.radius&&(e.radius=parseInt(e.radius,10)),u(e)}).read();var x=[[-75.63195500381617,39.76055866429846],[-74.6075343956525,40.122534817620846]],E=y("<button id='property-<%- properties.id %>' class='listing'>\n  <div class='punt-clicks keyline-bottom contain'>\n    <div class='pad2x pad1y'>\n      <h4 class='space-top0'>\n        <span class='capitalize'><%- properties.address.toLowerCase() %> </span>\n      </h4>\n      <% if (properties.rooms) { %>\n        <span class='quiet'><%- properties.rooms %> rooms</span>\n      <% } %>\n      <% if (properties.stories) { %>\n        <span class='quiet'><%- properties.stories %> stories</span>\n      <% } %>\n      <% if (properties.bedrooms) { %>\n        <span class='quiet'><%- properties.bedrooms %> bedrooms</span>\n      <% } %>\n      <% if (properties.bathrooms) { %>\n        <span class='quiet'><%- properties.bathrooms %> bathrooms</span>\n      <% } %>\n    </div>\n\n    <div class='pin-topright pad1x'>\n      <span class='pad0 dark inline property-value-tab round-bottom' style='background-color:<%- fill %>;'>\n        <h4><%- properties.price %></h4>\n      </span>\n    </div>\n  </div>\n</button>\n"),L=y("<div class='pad1 round-top dark' style='background-color:<%- fill %>'>\n  <h3><%- properties.price %></h3>\n</div>\n<div class='pad1 fill-white round-bottom'>\n  <h4 class='capitalize'><%- properties.address.toLowerCase() %></h4>\n  <% if (properties.rooms) { %>\n    <span class='quiet'><%- properties.rooms %> rooms</span>\n  <% } %>\n  <% if (properties.stories) { %>\n    <span class='quiet'><%- properties.stories %> stories</span>\n  <% } %>\n  <% if (properties.bedrooms) { %>\n    <span class='quiet'><%- properties.bedrooms %> bedrooms</span>\n  <% } %>\n  <% if (properties.bathrooms) { %>\n    <span class='quiet'><%- properties.bathrooms %> bathrooms</span>\n  <% } %>\n</div>\n"),O=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/dark-v8",center:j.center,zoom:j.zoom,maxBounds:x,minZoom:13,maxZoom:19});-1!==window.location.search.indexOf("embed")&&(O.addControl(new mapboxgl.Navigation({position:"bottom-right"})),O.scrollZoom.disable(),document.body.classList.add("embed"));var k,A=document.getElementById("radius"),S=document.getElementById("radius-value"),C=document.getElementById("filter-group"),F=document.getElementById("listings"),T=document.getElementById("listings-header"),q=30,M=O.project(j.center),I=new w(O.getContainer(),{innerRadius:q,radius:parseInt(j.radius,10),position:M,fill:"#3887be",fillRadius:"rgba(82, 161, 216, 0.25)"});I.draw().enable();var R=new mapboxgl.Popup({closeButton:!1}),P={type:"FeatureCollection",features:[]},$=[[0,"#27b691","Residential"],[1,"#ed5299","Commecial"],[2,"#484896","Hotels & Apartments"],[3,"#ec3649","Store with dwelling"],[4,"#f06f42","Vacant land"],[5,"#f6d845","Industrial"]];O.on("source.load",function(t){"philly"===t.source.id&&(M={x:M.x+q/2,y:M.y+q/2},window.setTimeout(f,2e3))}),O.on("moveend",f),I.on("result",f),A.querySelector("input").addEventListener("input",function(t){u({radius:t.target.value}),d(j.radius),I.setRadius(j.radius)}),A.querySelector("input").addEventListener("change",f);var z,N=p(T);F.addEventListener("scroll",function(){var t=F.querySelectorAll(".property-group");Array.prototype.forEach.call(t,function(t,e,n){var r=n[e+1];if(r&&N.top>=p(t).top&&N.top<=p(r).top){var o=t.getAttribute("data-category");return void(o!==z&&(l(T,t),z=o))}})}),O.on("click",function(t){O.featuresAt(t.point,{radius:5,includeGeometry:!0,layer:$.map(function(t,e){return"poi-"+e})},function(t,e){if(!t&&e.length){var n=e[0];n.fill=s(n),c(n);var r=document.getElementById("property-"+n.properties.id);r&&(F.scrollTop=r.offsetTop-F.offsetTop,Array.prototype.forEach.call(F.querySelectorAll("button"),function(t){t.classList.toggle("active",t.id===r.id)}))}})}),O.on("mousemove",function(t){O.featuresAt(t.point,{radius:5,layer:$.map(function(t,e){return"poi-"+e})},function(t,e){O.getCanvas().style.cursor=!t&&e.length?"pointer":""})}),O.on("moveend",function(){u({zoom:O.getZoom().toFixed(2)}),d(parseInt(j.radius,10))}),O.on("load",i)},{"./circle":28,hashable:1,"lodash.groupby":2,"lodash.template":18,path:31,"turf-distance":33,"turf-point":35,xtend:27}],30:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function i(t){return"number"==typeof t}function u(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,i,s,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(u(n))for(i=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,s=0;r>s;s++)c[s].apply(this,i);return!0},r.prototype.addListener=function(t,e){var n;if(!o(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?u(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,u(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!o(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,i,a;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],i=n.length,r=-1,n===e||o(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(u(n)){for(a=i;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],o(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(o(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],31:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return o.exec(t).slice(1)};n.resolve=function(){for(var n="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var u=i>=0?arguments[i]:t.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(n=u+"/"+n,o="/"===u.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(t){var o=n.isAbsolute(t),i="/"===u(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!o).join("/"),t||o||(t="."),t&&i&&(t+="/"),(o?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var o=r(t.split("/")),i=r(e.split("/")),u=Math.min(o.length,i.length),a=u,s=0;u>s;s++)if(o[s]!==i[s]){a=s;break}for(var c=[],s=a;s<o.length;s++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=i(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=i(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return i(t)[3]};var u="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return 0>e&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:32}],32:[function(t,e,n){function r(){l=!1,a.length?c=a.concat(c):f=-1,c.length&&o()}function o(){if(!l){var t=setTimeout(r);l=!0;for(var e=c.length;e;){for(a=c,c=[];++f<e;)a&&a[f].run();f=-1,e=c.length}a=null,l=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function u(){}var a,s=e.exports={},c=[],l=!1,f=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new i(t,e)),1!==c.length||l||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=u,s.addListener=u,s.once=u,s.off=u,s.removeListener=u,s.removeAllListeners=u,s.emit=u,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],33:[function(t,e,n){function r(t){return t*Math.PI/180}var o=t("turf-invariant");e.exports=function(t,e,n){o.featureOf(t,"Point","distance"),o.featureOf(e,"Point","distance");var i,u=t.geometry.coordinates,a=e.geometry.coordinates,s=r(a[1]-u[1]),c=r(a[0]-u[0]),l=r(u[1]),f=r(a[1]),p=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(l)*Math.cos(f),d=2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p));switch(n){case"miles":i=3960;break;case"kilometers":case"kilometres":i=6373;break;case"degrees":i=57.2957795;break;case"radians":i=1;break;case void 0:i=6373;break;default:throw new Error('unknown option given to "units"')}var h=i*d;return h}},{"turf-invariant":34}],34:[function(t,e,n){function r(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function o(t,e,n){if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function i(t,e,n){if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var o=t.features[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}e.exports.geojsonType=r,e.exports.collectionOf=i,e.exports.featureOf=o},{}],35:[function(t,e,n){var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.exports=function(t,e){if(!r(t))throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:t},properties:e||{}}}},{}]},{},[29]);
