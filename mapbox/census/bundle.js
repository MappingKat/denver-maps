!function e(t,n,r){function o(u,s){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!s&&c)return c(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){"use strict";function r(e){for(var t in e)"function"==typeof e[t]&&0===t.indexOf("_on")&&(e[t]=e[t].bind(e))}var o=e("events").EventEmitter,i=function(e,t){t=t||{},this._fill=t.fill||"rgba(0,0,0,0.1)",this._stroke=t.stroke||"rgba(0,0,0,0.1)",this._strokeWidth=t.strokeWidth||3,this._el=e,this._boxEl=null,this._ev=new o,r(this)};i.prototype._getCoordFromEvent=function(e){var t=this._el.getBoundingClientRect();return e=e.touches?e.touches[0]:e,{x:e.clientX-t.left,y:e.clientY-t.top}},i.prototype._onDown=function(e){this._active||(e.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("keydown",this._onKeyDown)),this._active=!1,this._startPixel=this._getCoordFromEvent(e))},i.prototype._onKeyDown=function(e){27===e.keyCode&&(this._active=!1,this.clear())},i.prototype._onMove=function(e){this._active||(this._active=!0),this._currentPixel=this._getCoordFromEvent(e),this._boxEl||(this._boxEl=document.createElement("div"),this._boxEl.style.backgroundColor=this._fill,this._boxEl.style.borderStyle="solid",this._boxEl.style.borderColor=this._stroke,this._boxEl.style.borderWidth=this._strokeWidth+"px",this._boxEl.style.display="absolute",this._boxEl.style.top=0,this._boxEl.style.left=0,this._el.appendChild(this._boxEl));var t=Math.min(this._startPixel.x,this._currentPixel.x),n=Math.max(this._startPixel.x,this._currentPixel.x),r=Math.min(this._startPixel.y,this._currentPixel.y),o=Math.max(this._startPixel.y,this._currentPixel.y),i="translate("+t+"px,"+r+"px)";this._boxEl.style.transform=i,this._boxEl.style.WebkitTransform=i,this._boxEl.style.width=n-t+"px",this._boxEl.style.height=o-r+"px",e.preventDefault()},i.prototype._onTouchEnd=function(){this._onUp(),document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd)},i.prototype._onMouseUp=function(){this._onUp(),document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("keydown",this._onKeyDown)},i.prototype._onUp=function(){this._active&&(this._active=!1,this.fire("result",{start:this._startPixel,end:this._currentPixel}))},i.prototype.clear=function(){return this._boxEl&&(this._boxEl.parentElement.removeChild(this._boxEl),this._boxEl=null),this},i.prototype.enable=function(){return this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this},i.prototype.disable=function(){return this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this},i.prototype.setFill=function(e){this._fill=e},i.prototype.setStroke=function(e){this._stroke=e},i.prototype.setStrokeWidth=function(e){this._strokeWidth=e},i.prototype.on=function(e,t){return this._ev.on(e,t),this},i.prototype.fire=function(e,t){return this._ev.emit(e,t),this},i.prototype.off=function(e,t){return this._ev.removeListener(e,t),this},"undefined"!=typeof t&&t.exports?t.exports=i:window.Box=i},{events:4}],2:[function(e,t,n){"use strict";function r(e){var t;return D.forEach(function(n,r){0===r?e>=n[0]&&(t=r):e>=n[0]&&e<D[r-1][0]&&(t=r)}),D[t]}function o(e){window.clearTimeout(k);var t=document.getElementById("error");t.classList.add("pad1","active"),t.textContent=e,k=window.setTimeout(function(){t.classList.remove("pad1","active"),t.textContent=""},3e3)}function i(e){document.getElementById("sidebar").classList.toggle("loading",e)}function u(){document.body.classList.remove("loading"),A.addSource("boxdraw",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),D.forEach(function(e,t){A.addLayer({id:"hex-"+t,interactive:!0,type:"fill",source:"boxdraw",paint:{"fill-color":e[1],"fill-outline-color":e[1],"fill-opacity":.75},filter:0==t?[">=","population",e[0]]:["all",[">=","population",e[0]],["<","population",D[t-1][0]]]},"place_label_city_small_s")}),L=document.createElement("button"),L.id="draw",L.className="icon polygon button round-right draw-ctrl",L.title="Draw",L.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),L.classList.contains("active")?s():(L.classList.add("active"),A.boxZoom.disable(),A.dragPan.disable(),A.getCanvas().style.cursor="crosshair",T.enable())}),I.appendChild(L),T.on("result",function(e){s(),c();var t=new mapboxgl.LngLatBounds(A.unproject(e.start),A.unproject(e.end)).toArray();w=[t[0][0],t[0][1],t[1][0],t[1][1]],a(w)})}function s(){L.classList.remove("active"),A.boxZoom.enable(),A.dragPan.enable(),A.getCanvas().style.cursor="",T.disable().clear()}function c(){var e=document.createEvent("HTMLEvents");e.initEvent("click",!0,!1);var t=document.getElementById("geocoder").querySelector(".geocoder-icon-close");t.classList.contains("active")&&t.dispatchEvent(e)}function a(e){i(!0);var t=p(e,C,"miles"),n=[];t.features.forEach(function(e){e=d(e),n.push(e.geometry.coordinates.reverse())}),_.surface(x,E,j,h.encode(n),{geojson:!0},function(e,n){if(e)return i(!1),o(e.message);var r=[],u=[];n.results.features.forEach(function(e){var n=e.properties;n.point=e.geometry.coordinates,t.features[n.id].properties=n,n.population&&r.push(n.population),n["median-income"]&&u.push(n["median-income"])}),f(r,u),A.getSource("boxdraw").setData(t),i(!1)})}function f(e,t){P.parentNode.classList.remove("hidden"),P.innerHTML=g({medianPop:m(e).toLocaleString(),medianIncome:m(t).toLocaleString()}),q.classList.remove("hidden"),q.querySelector("input").value=C,R.textContent=C}var l=(e("path"),e("mapbox/lib/services/surface")),p=e("turf-hex-grid"),d=e("turf-centroid"),h=e("polyline"),y=e("lodash.template"),m=e("median"),v=y("<div class='pad1 round-top <%- klass %>' style='background-color:<%- fill %>'>\n  <strong><%- county %></strong><span class='quiet'> <%- population %> (pop)</span>\n</div>\n<div class='pad1 fill-white round-bottom'>\n  <label>Median income</label>\n  <h3>$<%- medianIncome %></h3>\n</div>\n"),g=y("<div class='col12 mobile-cols clearfix dark'>\n  <div class='col6'>\n    <label class='small strong quiet'>Median population</label>\n    <h3><%- medianPop %></h3>\n  </div>\n  <div class='col6'>\n    <label class='small strong quiet'>Median income</label>\n    <h3>$<%- medianIncome %></h3>\n  </div>\n</div>\n"),b=e("./box"),w=[];mapboxgl.accessToken="pk.eyJ1IjoidHJpc3RlbiIsImEiOiJiUzBYOEJzIn0.VyXs9qNWgTfABLzSI3YcrQ";var _=new l(mapboxgl.accessToken),x="mapbox.82pkq93d",E="original",j=["COUNTY","median-income","population"],A=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v8",center:[-98,38.88],minZoom:3,maxZoom:8,zoom:3.75});-1!==window.location.search.indexOf("embed")&&A.scrollZoom.disable();var S=new mapboxgl.Popup({closeButton:!1}),O=new mapboxgl.Geocoder({container:"geocoder",country:"us",types:"region,postcode,place"});A.addControl(O);var T,k,L,P=document.getElementById("results"),C=80,q=document.getElementById("hex-size"),R=document.getElementById("hex-value"),I=document.getElementById("draw-controls"),T=new b(A.getContainer(),{fill:"rgba(56, 135, 190, 0.05)",stroke:"#3887be",strokeWidth:2}),D=[[1e6,"#723122","dark"],[5e5,"#8B4225","dark"],[1e5,"#A25626","dark"],[5e4,"#B86B25","dark"],[1e4,"#CA8323",""],[5e3,"#DA9C20",""],[1e3,"#E6B71E",""],[100,"#EED322",""],[0,"#F2F12D",""]];q.querySelector("input").addEventListener("input",function(e){R.textContent=e.target.value}),q.querySelector("input").addEventListener("change",function(e){C=e.target.value,a(w)}),A.on("mousemove",function(e){L.classList.contains("active")||A.featuresAt(e.point,{includeGeometry:!0,layer:D.reduce(function(e,t,n){return e.push("hex-"+n),e},[])},function(e,t){if(A.getCanvas().style.cursor=!e&&t.length?"pointer":"",S.remove(),!e&&t.length){var n=t[0],o=r(n.properties.population);S=new mapboxgl.Popup({closeOnClick:!1,closeButton:!1}).setLngLat(n.properties.point).setHTML(v({county:n.properties.COUNTY,fill:o[1],klass:o[2],population:n.properties.population.toLocaleString(),medianIncome:n.properties["median-income"].toLocaleString()})).addTo(A)}})}),O.on("geocoder.input",function(e){w=e.result.bbox,a(w)}),A.on("style.load",u)},{"./box":1,"lodash.template":10,"mapbox/lib/services/surface":27,median:71,path:6,polyline:72,"turf-centroid":73,"turf-hex-grid":76}],3:[function(e,t,n){function r(e,t){return d.isUndefined(t)?""+t:d.isNumber(t)&&!isFinite(t)?t.toString():d.isFunction(t)||d.isRegExp(t)?t.toString():t}function o(e,t){return d.isString(e)?e.length<t?e:e.slice(0,t):e}function i(e){return o(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+o(JSON.stringify(e.expected,r),128)}function u(e,t,n,r,o){throw new m.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function s(e,t){e||u(e,!0,t,"==",m.ok)}function c(e,t){if(e===t)return!0;if(d.isBuffer(e)&&d.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return d.isDate(e)&&d.isDate(t)?e.getTime()===t.getTime():d.isRegExp(e)&&d.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:d.isObject(e)||d.isObject(t)?f(e,t):e==t}function a(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function f(e,t){if(d.isNullOrUndefined(e)||d.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(d.isPrimitive(e)||d.isPrimitive(t))return e===t;var n=a(e),r=a(t);if(n&&!r||!n&&r)return!1;if(n)return e=h.call(e),t=h.call(t),c(e,t);var o,i,u=v(e),s=v(t);if(u.length!=s.length)return!1;for(u.sort(),s.sort(),i=u.length-1;i>=0;i--)if(u[i]!=s[i])return!1;for(i=u.length-1;i>=0;i--)if(o=u[i],!c(e[o],t[o]))return!1;return!0}function l(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function p(e,t,n,r){var o;d.isString(n)&&(r=n,n=null);try{t()}catch(i){o=i}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&u(o,n,"Missing expected exception"+r),!e&&l(o,n)&&u(o,n,"Got unwanted exception"+r),e&&o&&n&&!l(o,n)||!e&&o)throw o}var d=e("util/"),h=Array.prototype.slice,y=Object.prototype.hasOwnProperty,m=t.exports=s;m.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var t=e.stackStartFunction||u;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,o=t.name,s=r.indexOf("\n"+o);if(s>=0){var c=r.indexOf("\n",s+1);r=r.substring(c+1)}this.stack=r}}},d.inherits(m.AssertionError,Error),m.fail=u,m.ok=s,m.equal=function(e,t,n){e!=t&&u(e,t,n,"==",m.equal)},m.notEqual=function(e,t,n){e==t&&u(e,t,n,"!=",m.notEqual)},m.deepEqual=function(e,t,n){c(e,t)||u(e,t,n,"deepEqual",m.deepEqual)},m.notDeepEqual=function(e,t,n){c(e,t)&&u(e,t,n,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(e,t,n){e!==t&&u(e,t,n,"===",m.strictEqual)},m.notStrictEqual=function(e,t,n){e===t&&u(e,t,n,"!==",m.notStrictEqual)},m["throws"]=function(e,t,n){p.apply(this,[!0].concat(h.call(arguments)))},m.doesNotThrow=function(e,t){p.apply(this,[!1].concat(h.call(arguments)))},m.ifError=function(e){if(e)throw e};var v=Object.keys||function(e){var t=[];for(var n in e)y.call(e,n)&&t.push(n);return t}},{"util/":9}],4:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function u(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,c,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(u(n))for(i=Array.prototype.slice.call(arguments,1),a=n.slice(),r=a.length,c=0;r>c;c++)a[c].apply(this,i);return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?u(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,u(this._events[e])&&!this._events[e].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,s;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(u(n)){for(s=i;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],5:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],6:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return o.exec(e).slice(1)};n.resolve=function(){for(var n="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var u=i>=0?arguments[i]:e.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(n=u+"/"+n,o="/"===u.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(e){var o=n.isAbsolute(e),i="/"===u(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=r(e.split("/")),i=r(t.split("/")),u=Math.min(o.length,i.length),s=u,c=0;u>c;c++)if(o[c]!==i[c]){s=c;break}for(var a=[],c=s;c<o.length;c++)a.push("..");return a=a.concat(i.slice(s)),a.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return i(e)[3]};var u="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:7}],7:[function(e,t,n){function r(){f=!1,s.length?a=s.concat(a):l=-1,a.length&&o()}function o(){if(!f){var e=setTimeout(r);f=!0;for(var t=a.length;t;){for(s=a,a=[];++l<t;)s&&s[l].run();l=-1,t=a.length}s=null,f=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function u(){}var s,c=t.exports={},a=[],f=!1,l=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new i(e,t)),1!==a.length||f||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=u,c.addListener=u,c.once=u,c.off=u,c.removeListener=u,c.removeAllListeners=u,c.emit=u,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],8:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],9:[function(e,t,n){(function(t,r){function o(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(t)?r.showHidden=t:t&&n._extend(r,t),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),c(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function u(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(r,e);return b(o)||(o=c(e,o,r)),o}var i=a(e,t);if(i)return i;var u=Object.keys(t),y=s(u);if(e.showHidden&&(u=Object.getOwnPropertyNames(t)),A(t)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return f(t);if(0===u.length){if(S(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(j(t))return e.stylize(Date.prototype.toString.call(t),"date");if(A(t))return f(t)}var v="",g=!1,w=["{","}"];if(h(t)&&(g=!0,w=["[","]"]),S(t)){var _=t.name?": "+t.name:"";v=" [Function"+_+"]"}if(x(t)&&(v=" "+RegExp.prototype.toString.call(t)),j(t)&&(v=" "+Date.prototype.toUTCString.call(t)),A(t)&&(v=" "+f(t)),0===u.length&&(!g||0==t.length))return w[0]+v+w[1];if(0>r)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var E;return E=g?l(e,t,r,y,u):u.map(function(n){return p(e,t,r,y,n,g)}),e.seen.pop(),d(E,v,w)}function a(e,t){if(_(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):y(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,o){for(var i=[],u=0,s=t.length;s>u;++u)P(t,String(u))?i.push(p(e,t,n,r,String(u),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(e,t,n,r,o,!0))}),i}function p(e,t,n,r,o,i){var u,s,a;if(a=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},a.get?s=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(s=e.stylize("[Setter]","special")),P(r,o)||(u="["+o+"]"),s||(e.seen.indexOf(a.value)<0?(s=m(n)?c(e,a.value,null):c(e,a.value,n-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),_(u)){if(i&&o.match(/^\d+$/))return s;u=JSON.stringify(""+o),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+s}function d(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function g(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function _(e){return void 0===e}function x(e){return E(e)&&"[object RegExp]"===T(e)}function E(e){return"object"==typeof e&&null!==e}function j(e){return E(e)&&"[object Date]"===T(e)}function A(e){return E(e)&&("[object Error]"===T(e)||e instanceof Error)}function S(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function T(e){return Object.prototype.toString.call(e)}function k(e){return 10>e?"0"+e.toString(10):e.toString(10)}function L(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var C=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,u=String(e).replace(C,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];i>n;s=r[++n])u+=m(s)||!E(s)?" "+s:" "+o(s);return u},n.deprecate=function(e,o){function i(){if(!u){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),u=!0}return e.apply(this,arguments)}if(_(r.process))return function(){return n.deprecate(e,o).apply(this,arguments)};if(t.noDeprecation===!0)return e;var u=!1;return i};var q,R={};n.debuglog=function(e){if(_(q)&&(q=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!R[e])if(new RegExp("\\b"+e+"\\b","i").test(q)){var r=t.pid;R[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else R[e]=function(){};return R[e]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=y,n.isNull=m,n.isNullOrUndefined=v,n.isNumber=g,n.isString=b,n.isSymbol=w,n.isUndefined=_,n.isRegExp=x,n.isObject=E,n.isDate=j,n.isError=A,n.isFunction=S,n.isPrimitive=O,n.isBuffer=e("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",L(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":8,_process:7,inherits:5}],10:[function(e,t,n){(function(n){function r(e,t,n){var r=n?n.length:0;switch(r){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function o(e,t){return w(t,function(t){return e[t]})}function i(e){return"\\"+U[e]}function u(e,t){return e="number"==typeof e||D.test(e)?+e:-1,t=null==t?O:t,e>-1&&e%1==0&&t>e}function s(e,t,n,r){return void 0===e||f(e,z[n])&&!N.call(r,n)?t:e}function c(e){return function(t){return null==t?void 0:t[e]}}function a(e,t,n){if(!y(n))return!1;var r=typeof t;return("number"==r?l(n)&&u(t,n.length):"string"==r&&t in n)?f(n[t],e):!1}function f(e,t){return e===t||e!==e&&t!==t}function l(e){return null!=e&&!("function"==typeof e&&d(e))&&h(J(e))}function p(e){return m(e)&&"string"==typeof e.message&&B.call(e)==T}function d(e){var t=y(e)?B.call(e):"";return t==k||t==L}function h(e){return"number"==typeof e&&e>-1&&e%1==0&&O>=e}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){return!!e&&"object"==typeof e}function v(e){return"symbol"==typeof e||m(e)&&B.call(e)==P}function g(e){if("string"==typeof e)return e;if(null==e)return"";if(v(e))return H?G.call(e):"";var t=e+"";return"0"==t&&1/e==-S?"-0":t}function b(e,t,n){var r=A.imports._.templateSettings||A;n&&a(e,t,n)&&(t=void 0),e=g(e),t=_({},t,r,s);var u,c,f=_({},t.imports,r.imports,s),l=x(f),d=o(f,l),h=0,y=t.interpolate||F,m="__p += '",v=RegExp((t.escape||F).source+"|"+y.source+"|"+(y===E?I:F).source+"|"+(t.evaluate||F).source+"|$","g"),b="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(v,function(t,n,r,o,s,a){return r||(r=o),m+=e.slice(h,a).replace(M,i),n&&(u=!0,m+="' +\n__e("+n+") +\n'"),s&&(c=!0,m+="';\n"+s+";\n__p += '"),r&&(m+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=a+t.length,t}),m+="';\n";var w=t.variable;w||(m="with (obj) {\n"+m+"\n}\n"),m=(c?m.replace(C,""):m).replace(q,"$1").replace(R,"$1;"),m="function("+(w||"obj")+") {\n"+(w?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var j=Q(function(){return Function(l,b+"return "+m).apply(void 0,d)});if(j.source=m,p(j))throw j;return j}var w=e("lodash._arraymap"),_=e("lodash.assigninwith"),x=e("lodash.keys"),E=e("lodash._reinterpolate"),j=e("lodash.rest"),A=e("lodash.templatesettings"),S=1/0,O=9007199254740991,T="[object Error]",k="[object Function]",L="[object GeneratorFunction]",P="[object Symbol]",C=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,I=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,D=/^(?:0|[1-9]\d*)$/,F=/($^)/,M=/['\n\r\u2028\u2029\\]/g,U={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},z=n.Object.prototype,N=z.hasOwnProperty,B=z.toString,H=n.Symbol,$=H?H.prototype:void 0,G=H?$.toString:void 0,J=c("length"),Q=j(function(e,t){try{return r(e,void 0,t)}catch(n){return p(n)?n:new Error(n)}});t.exports=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arraymap":11,"lodash._reinterpolate":12,"lodash.assigninwith":13,"lodash.keys":15,"lodash.rest":16,"lodash.templatesettings":17}],11:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}t.exports=r},{}],12:[function(e,t,n){var r=/<%=([\s\S]+?)%>/g;t.exports=r},{}],13:[function(e,t,n){(function(n){function r(e,t){return e="number"==typeof e||b.test(e)?+e:-1,t=null==t?m:t,e>-1&&e%1==0&&t>e}function o(e,t,n){var r=e[t];(!a(r,n)||a(r,w[t])&&!_.call(e,t)||void 0===n&&!(t in e))&&(e[t]=n)}function i(e){return function(t){return null==t?void 0:t[e]}}function u(e,t,n,r){n||(n={});for(var i=-1,u=t.length;++i<u;){var s=t[i],c=r?r(n[s],e[s],s,n,e):e[s];o(n,s,c)}return n}function s(e){return y(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,u=o>2?n[2]:void 0;for(i="function"==typeof i?(o--,i):void 0,u&&c(n[0],n[1],u)&&(i=3>o?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})}function c(e,t,n){if(!d(n))return!1;var o=typeof t;return("number"==o?f(n)&&r(t,n.length):"string"==o&&t in n)?a(n[t],e):!1}function a(e,t){return e===t||e!==e&&t!==t}function f(e){return null!=e&&!("function"==typeof e&&l(e))&&p(E(e))}function l(e){var t=d(e)?x.call(e):"";return t==v||t==g}function p(e){return"number"==typeof e&&e>-1&&e%1==0&&m>=e}function d(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var h=e("lodash.keysin"),y=e("lodash.rest"),m=9007199254740991,v="[object Function]",g="[object GeneratorFunction]",b=/^(?:0|[1-9]\d*)$/,w=n.Object.prototype,_=w.hasOwnProperty,x=w.toString,E=i("length"),j=s(function(e,t,n,r){u(t,h(t),e,r)});t.exports=j}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash.keysin":14,"lodash.rest":16}],14:[function(e,t,n){(function(e){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function r(e,t){return e="number"==typeof e||E.test(e)?+e:-1,t=null==t?g:t,e>-1&&e%1==0&&t>e}function o(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function i(e){e=null==e?e:Object(e);var t=[];for(var n in e)t.push(n);return t}function u(e){return function(t){return null==t?void 0:t[e]}}function s(e){var t=e?e.length:void 0;return d(t)&&(P(e)||m(e)||a(e))?n(t,String):null}function c(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||j;return e===n}function a(e){return l(e)&&A.call(e,"callee")&&(!k.call(e,"callee")||S.call(e)==b)}function f(e){return null!=e&&!("function"==typeof e&&p(e))&&d(L(e))}function l(e){return y(e)&&f(e)}function p(e){var t=h(e)?S.call(e):"";return t==w||t==_}function d(e){return"number"==typeof e&&e>-1&&e%1==0&&g>=e}function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return!!e&&"object"==typeof e}function m(e){return"string"==typeof e||!P(e)&&y(e)&&S.call(e)==x}function v(e){for(var t=-1,n=c(e),o=i(e),u=o.length,a=s(e),f=!!a,l=a||[],p=l.length;++t<u;){var d=o[t];f&&("length"==d||r(d,p))||"constructor"==d&&(n||!A.call(e,d))||l.push(d)}return l}var g=9007199254740991,b="[object Arguments]",w="[object Function]",_="[object GeneratorFunction]",x="[object String]",E=/^(?:0|[1-9]\d*)$/,j=e.Object.prototype,A=j.hasOwnProperty,S=j.toString,O=e.Reflect,T=O?O.enumerate:void 0,k=j.propertyIsEnumerable;T&&!k.call({valueOf:1},"valueOf")&&(i=function(e){return o(T(e))});var L=u("length"),P=Array.isArray;t.exports=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,n){(function(e){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function r(e,t){return e="number"==typeof e||E.test(e)?+e:-1,t=null==t?g:t,e>-1&&e%1==0&&t>e;
}function o(e,t){return A.call(e,t)||"object"==typeof e&&t in e&&null===O(e)}function i(e){return k(Object(e))}function u(e){return function(t){return null==t?void 0:t[e]}}function s(e){var t=e?e.length:void 0;return d(t)&&(P(e)||m(e)||a(e))?n(t,String):null}function c(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||j;return e===n}function a(e){return l(e)&&A.call(e,"callee")&&(!T.call(e,"callee")||S.call(e)==b)}function f(e){return null!=e&&!("function"==typeof e&&p(e))&&d(L(e))}function l(e){return y(e)&&f(e)}function p(e){var t=h(e)?S.call(e):"";return t==w||t==_}function d(e){return"number"==typeof e&&e>-1&&e%1==0&&g>=e}function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return!!e&&"object"==typeof e}function m(e){return"string"==typeof e||!P(e)&&y(e)&&S.call(e)==x}function v(e){var t=c(e);if(!t&&!f(e))return i(e);var n=s(e),u=!!n,a=n||[],l=a.length;for(var p in e)!o(e,p)||u&&("length"==p||r(p,l))||t&&"constructor"==p||a.push(p);return a}var g=9007199254740991,b="[object Arguments]",w="[object Function]",_="[object GeneratorFunction]",x="[object String]",E=/^(?:0|[1-9]\d*)$/,j=e.Object.prototype,A=j.hasOwnProperty,S=j.toString,O=Object.getPrototypeOf,T=j.propertyIsEnumerable,k=Object.keys,L=u("length"),P=Array.isArray;t.exports=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,n){(function(e){function n(e,t,n){var r=n?n.length:0;switch(r){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){if("function"!=typeof e)throw new TypeError(c);return t=_(void 0===t?e.length-1:u(t),0),function(){for(var r=arguments,o=-1,i=_(r.length-t,0),u=Array(i);++o<i;)u[o]=r[t+o];switch(t){case 0:return e.call(this,u);case 1:return e.call(this,r[0],u);case 2:return e.call(this,r[0],r[1],u)}var s=Array(t+1);for(o=-1;++o<t;)s[o]=r[o];return s[t]=u,n(e,this,s)}}function o(e){var t=i(e)?w.call(e):"";return t==p||t==d}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){if(!e)return 0===e?e:0;if(e=s(e),e===a||e===-a){var t=0>e?-1:1;return t*f}var n=e%1;return e===e?n?e-n:e:0}function s(e){if(i(e)){var t=o(e.valueOf)?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(h,"");var n=m.test(e);return n||v.test(e)?g(e.slice(2),n?2:8):y.test(e)?l:+e}var c="Expected a function",a=1/0,f=1.7976931348623157e308,l=NaN,p="[object Function]",d="[object GeneratorFunction]",h=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,v=/^0o[0-7]+$/i,g=parseInt,b=e.Object.prototype,w=b.toString,_=Math.max;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(e,t,n){var r=e("lodash.escape"),o=e("lodash._reinterpolate"),i=/<%-([\s\S]+?)%>/g,u=/<%([\s\S]+?)%>/g,s={escape:i,evaluate:u,interpolate:o,variable:"",imports:{_:{escape:r}}};t.exports=s},{"lodash._reinterpolate":12,"lodash.escape":18}],18:[function(e,t,n){(function(e){function n(e){return l[e]}function r(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||r(e)&&d.call(e)==c}function i(e){if("string"==typeof e)return e;if(null==e)return"";if(o(e))return h?m.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}function u(e){return e=i(e),e&&f.test(e)?e.replace(a,n):e}var s=1/0,c="[object Symbol]",a=/[&<>"'`]/g,f=RegExp(a.source),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},p=e.Object.prototype,d=p.toString,h=e.Symbol,y=h?h.prototype:void 0,m=h?y.toString:void 0;t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(e,t,n){"use strict";function r(e){o("number"==typeof e.latitude&&"number"==typeof e.longitude,"location must be an object with numeric latitude & longitude properties"),void 0!==e.zoom&&o("number"==typeof e.zoom,"zoom must be numeric")}var o=e("assert");t.exports=r},{assert:3}],20:[function(e,t,n){"use strict";t.exports=function(e){return window.atob(e)}},{}],21:[function(e,t,n){"use strict";var r=e("rest/interceptor"),o=r({success:function(e){var t=e&&e.request,n=t&&t.callback;return"function"==typeof n&&n(null,e.entity),e},error:function(e){var t=e&&e.request,n=t&&t.callback;if("function"==typeof n){var r=e.error||e.entity;"object"!=typeof r&&(r=new Error(r)),n(r)}return e}});t.exports=o},{"rest/interceptor":33}],22:[function(e,t,n){"use strict";var r=e("rest"),o=e("./callbackify");t.exports=function(t){return r.wrap(e("rest/interceptor/errorCode")).wrap(e("rest/interceptor/pathPrefix"),{prefix:t.endpoint}).wrap(e("rest/interceptor/mime"),{mime:"application/json"}).wrap(e("rest/interceptor/defaultRequest"),{params:{access_token:t.accessToken}}).wrap(e("rest/interceptor/template")).wrap(o)}},{"./callbackify":21,rest:29,"rest/interceptor/defaultRequest":34,"rest/interceptor/errorCode":35,"rest/interceptor/mime":36,"rest/interceptor/pathPrefix":37,"rest/interceptor/template":38}],23:[function(e,t,n){t.exports.DEFAULT_ENDPOINT="https://api.mapbox.com",t.exports.API_GEOCODER_FORWARD="/geocoding/v5/{dataset}/{query}.json{?proximity}",t.exports.API_GEOCODER_REVERSE="/geocoding/v5/{dataset}/{longitude},{latitude}.json",t.exports.API_DIRECTIONS="/v4/directions/{profile}/{encodedWaypoints}.json{?alternatives,instructions,geometry,steps}",t.exports.API_DISTANCE="/distances/v1/mapbox/{profile}",t.exports.API_SURFACE="/v4/surface/{mapid}.json{?layer,fields,points,geojson,interpolate,encoded_polyline}",t.exports.API_UPLOADS="/uploads/v1/{owner}",t.exports.API_UPLOAD="/uploads/v1/{owner}/{upload}",t.exports.API_UPLOAD_CREDENTIALS="/uploads/v1/{owner}/credentials",t.exports.API_MATCHING="/matching/v4/{profile}.json",t.exports.API_DATASET_DATASETS="/datasets/v1/{owner}",t.exports.API_DATASET_DATASET="/datasets/v1/{owner}/{dataset}",t.exports.API_DATASET_FEATURES="/datasets/v1/{owner}/{dataset}/features{?reverse,limit,start}",t.exports.API_DATASET_FEATURE="/datasets/v1/{owner}/{dataset}/features/{id}",t.exports.API_TILESTATS_STATISTICS="/tilestats/v1/{owner}/{tileset}",t.exports.API_TILESTATS_LAYER="/tilestats/v1/{owner}/{tileset}/{layer}",t.exports.API_TILESTATS_ATTRIBUTE="/tilestats/v1/{owner}/{tileset}/{layer}/{attribute}",t.exports.API_STATIC="/v4/{mapid}{+overlay}/{+xyz}/{width}x{height}{+retina}{.format}"},{}],24:[function(e,t,n){"use strict";function r(e){return e.map(function(e){return o(e),e.longitude+","+e.latitude}).join(";")}var o=e("./assert_location");t.exports=r},{"./assert_location":19}],25:[function(e,t,n){(function(n){"use strict";function r(e){var t=e.split(".")[1];if(!t)return null;if(t=t.replace(/-/g,"+").replace(/_/g,"/"),n.browser)t=t.replace(/=/g,"");else{var r=t.length%4;if(2===r&&(t+="=="),3===r&&(t+="="),1===r||r>3)return null}try{return JSON.parse(o(t)).u}catch(i){return null}}var o=e("atob");t.exports=r}).call(this,e("_process"))},{_process:7,atob:20}],26:[function(e,t,n){"use strict";function r(e){function t(t,n){this.name=e,o("string"==typeof t,"accessToken required to instantiate Mapbox client");var r=i.DEFAULT_ENDPOINT;void 0!==n&&(o("object"==typeof n,"options must be an object"),n.endpoint&&(o("string"==typeof n.endpoint,"endpoint must be a string"),r=n.endpoint),n.account&&(o("string"==typeof n.account,"account must be a string"),this.owner=n.account)),this.client=u({endpoint:r,accessToken:t}),this.accessToken=t,this.endpoint=r,this.owner=this.owner||s(t),o(!!this.owner,"could not determine account from provided accessToken")}return t}var o=e("assert"),i=e("./constants"),u=e("./client"),s=e("./get_user");t.exports=r},{"./client":22,"./constants":23,"./get_user":25,assert:3}],27:[function(e,t,n){"use strict";var r=e("assert"),o=e("../format_points"),i=e("../make_service"),u=e("../constants"),s=i("MapboxSurface");s.prototype.surface=function(e,t,n,i,s,c){void 0===c&&"function"==typeof s&&(c=s,s={}),r("string"==typeof e,"mapid must be a string"),r("string"==typeof t,"layer must be a string"),r(Array.isArray(n),"fields must be an array of strings"),r(Array.isArray(i)||"string"==typeof i,"path must be an array of objects or a string"),r("object"==typeof s,"options must be an object"),r("function"==typeof c,"callback must be a function");var a=!0,f=!1;void 0!==s.interpolate&&(r("boolean"==typeof s.interpolate,"interpolate must be a boolean"),a=s.interpolate),void 0!==s.geojson&&(r("boolean"==typeof s.geojson,"geojson option must be boolean"),f=s.geojson);var l={geojson:f,layer:t,mapid:e,fields:n.join(","),interpolate:a};Array.isArray(i)?l.points=o(i):l.encoded_polyline=i,void 0!==s.zoom&&(r("number"==typeof s.zoom,"zoom must be a number"),l.z=s.zoom),this.client({path:u.API_SURFACE,params:l,callback:c})},t.exports=s},{"../constants":23,"../format_points":24,"../make_service":26,assert:3}],28:[function(e,t,n){!function(e,t){"use strict";var n;e(function(e){function r(e,t){var n,r,o,i;if(n=e,o={},t){for(r in t)i=new RegExp("\\{"+r+"\\}"),i.test(n)?n=n.replace(i,encodeURIComponent(t[r]),"g"):o[r]=t[r];for(r in o)n+=-1===n.indexOf("?")?"?":"&",n+=encodeURIComponent(r),null!==o[r]&&void 0!==o[r]&&(n+="=",n+=encodeURIComponent(o[r]))}return n}function o(e,t){return 0===e.indexOf(t)}function i(e,t){return this instanceof i?void(e instanceof i?(this._template=e.template,this._params=u({},this._params,t)):(this._template=(e||"").toString(),this._params=t||{})):new i(e,t)}var u,s,c,a,f;return u=e("./util/mixin"),c=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,a=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,f=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,i.prototype={append:function(e,t){return new i(this._template+e,u({},this._params,t))},fullyQualify:function(){if(!t)return this;if(this.isFullyQualified())return this;var e=this._template;return o(e,"//")?e=s.protocol+e:o(e,"/")?e=s.origin+e:this.isAbsolute()||(e=s.origin+s.pathname.substring(0,s.pathname.lastIndexOf("/")+1)),-1===e.indexOf("/",8)&&(e+="/"),new i(e,this._params)},isAbsolute:function(){return a.test(this.build())},isFullyQualified:function(){return f.test(this.build())},isCrossOrigin:function(){if(!s)return!0;var e=this.parts();return e.protocol!==s.protocol||e.hostname!==s.hostname||e.port!==s.port},parts:function(){var e,t;return e=this.fullyQualify().build().match(c),t={href:e[0],protocol:e[1],host:e[3]||"",hostname:e[4]||"",port:e[6],pathname:e[7]||"",search:e[8]||"",hash:e[9]||""},t.origin=t.protocol+"//"+t.host,t.port=t.port||("https:"===t.protocol?"443":"http:"===t.protocol?"80":""),t},build:function(e){return r(this._template,u({},this._params,e))},toString:function(){return this.build()}},s=t?new i(t.href).parts():n,i})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)},"undefined"!=typeof window?window.location:void 0)},{"./util/mixin":66}],29:[function(e,t,n){!function(e){"use strict";e(function(e){var t=e("./client/default"),n=e("./client/xhr");return t.setPlatformDefaultClient(n),t})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./client/default":31,"./client/xhr":32}],30:[function(e,t,n){!function(e){"use strict";e(function(){return function(e,t){return t&&(e.skip=function(){return t}),e.wrap=function(t,n){return t(e,n)},e.chain=function(){return"undefined"!=typeof console&&console.log("rest.js: client.chain() is deprecated, use client.wrap() instead"),e.wrap.apply(this,arguments)},e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],31:[function(e,t,n){!function(e){"use strict";var t;e(function(e){function n(){return o.apply(t,arguments)}var r,o,i;return r=e("../client"),n.setDefaultClient=function(e){o=e},n.getDefaultClient=function(){return o},n.resetDefaultClient=function(){o=i},n.setPlatformDefaultClient=function(e){if(i)throw new Error("Unable to redefine platformDefaultClient");o=i=e},r(n)})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../client":30}],32:[function(e,t,n){!function(e,t){"use strict";e(function(e){function n(e){var t={};return e?(e.trim().split(a).forEach(function(e){var n,r,o;n=e.indexOf(":"),r=u(e.substring(0,n).trim()),o=e.substring(n+1).trim(),t[r]?Array.isArray(t[r])?t[r].push(o):t[r]=[t[r],o]:t[r]=o}),t):t}function r(e,t){return Object.keys(t||{}).forEach(function(n){if(t.hasOwnProperty(n)&&n in e)try{e[n]=t[n]}catch(r){}}),e}var o,i,u,s,c,a;return o=e("when"),i=e("../UrlBuilder"),u=e("../util/normalizeHeaderName"),s=e("../util/responsePromise"),c=e("../client"),a=/[\r|\n]+/,c(function(e){return s.promise(function(o,u){var s,c,a,f,l,p,d,h;if(e="string"==typeof e?{path:e}:e||{},d={request:e},e.canceled)return d.error="precanceled",void u(d);if(h=e.engine||t.XMLHttpRequest,!h)return void u({request:e,error:"xhr-not-available"});l=e.entity,e.method=e.method||(l?"POST":"GET"),c=e.method,a=new i(e.path||"",e.params).build();try{s=d.raw=new h,r(s,e.mixin),s.open(c,a,!0),r(s,e.mixin),f=e.headers;for(p in f)("Content-Type"!==p||"multipart/form-data"!==f[p])&&s.setRequestHeader(p,f[p]);e.canceled=!1,e.cancel=function(){e.canceled=!0,s.abort(),u(d)},s.onreadystatechange=function(){e.canceled||s.readyState===(h.DONE||4)&&(d.status={code:s.status,text:s.statusText},d.headers=n(s.getAllResponseHeaders()),d.entity=s.responseText,d.status.code>0?o(d):setTimeout(function(){o(d)},0))};try{s.onerror=function(){d.error="loaderror",u(d)}}catch(y){}s.send(l)}catch(y){d.error="loaderror",u(d)}})})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)},"undefined"!=typeof window?window:void 0)},{"../UrlBuilder":28,"../client":30,"../util/normalizeHeaderName":67,"../util/responsePromise":68,when:63}],33:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e){return e}function n(e){return e}function r(e){return e}function o(e){return l.promise(function(t,n){e.forEach(function(e){l(e,t,n)})})}function i(e){return this instanceof i?void c(this,e):new i(e)}function u(e){var u,c,p,d;return e=e||{},u=e.init||t,c=e.request||n,p=e.success||e.response||r,d=e.error||function(){return l((e.response||r).apply(this,arguments),l.reject,l.reject)},function(t,n){function r(e){var u,s;return u={},s={arguments:Array.prototype.slice.call(arguments),client:r},e="string"==typeof e?{path:e}:e||{},e.originator=e.originator||r,a(c.call(u,e,n,s),function(e){var r,c,a;return a=t,e instanceof i&&(c=e.abort,a=e.client||a,r=e.response,e=e.request),r=r||l(e,function(e){return l(a(e),function(e){return p.call(u,e,n,s)},function(e){return d.call(u,e,n,s)})}),c?o([r,c]):r},function(t){return l.reject({request:e,error:t})})}return"object"==typeof t&&(n=t),"function"!=typeof t&&(t=e.client||s),n=u(n||{}),f(r,t)}}var s,c,a,f,l;return s=e("./client/default"),c=e("./util/mixin"),a=e("./util/responsePromise"),f=e("./client"),l=e("when"),u.ComplexRequest=i,u})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./client":30,"./client/default":31,"./util/mixin":66,"./util/responsePromise":68,when:63}],34:[function(e,t,n){!function(e){"use strict";e(function(e){var t,n,r;return t=e("../interceptor"),n=e("../util/mixin"),r=function(){function e(e,t,r){(e in t||e in r)&&(t[e]=n({},r[e],t[e]))}function t(e,t,n){e in n&&!(e in t)&&(t[e]=n[e])}var r={method:t,path:t,params:e,headers:e,entity:t,mixin:e};return function(e,t){for(var n in r)r[n](n,e,t);return e}}(),t({request:function(e,t){return r(e,t)}})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../interceptor":33,"../util/mixin":66}],35:[function(e,t,n){!function(e){"use strict";e(function(e){var t,n;return t=e("../interceptor"),n=e("when"),t({init:function(e){return e.code=e.code||400,e},response:function(e,t){return e.status&&e.status.code>=t.code?n.reject(e):e}})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../interceptor":33,when:63}],36:[function(e,t,n){!function(e){"use strict";e(function(e){var t,n,r,o,i;return t=e("../interceptor"),n=e("../mime"),r=e("../mime/registry"),i=e("when"),o={read:function(e){return e},write:function(e){return e}},t({init:function(e){return e.registry=e.registry||r,e},request:function(e,t){var r,u;return u=e.headers||(e.headers={}),r=n.parse(u["Content-Type"]=u["Content-Type"]||t.mime||"text/plain"),u.Accept=u.Accept||t.accept||r.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in e?t.registry.lookup(r).otherwise(function(){if(t.permissive)return o;throw"mime-unknown"}).then(function(n){var o=t.client||e.originator;return i.attempt(n.write,e.entity,{client:o,request:e,mime:r,registry:t.registry}).otherwise(function(){throw"mime-serialization"}).then(function(t){return e.entity=t,e})}):e},response:function(e,t){if(!(e.headers&&e.headers["Content-Type"]&&e.entity))return e;var r=n.parse(e.headers["Content-Type"]);return t.registry.lookup(r).otherwise(function(){return o}).then(function(n){var o=t.client||e.request&&e.request.originator;return i.attempt(n.read,e.entity,{client:o,response:e,mime:r,registry:t.registry}).otherwise(function(t){throw e.error="mime-deserialization",e.cause=t,e}).then(function(t){return e.entity=t,e})})}})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../interceptor":33,"../mime":39,"../mime/registry":40,when:63}],37:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e,t){return 0===e.indexOf(t)}function n(e,t){return e.lastIndexOf(t)+t.length===e.length}var r,o;return r=e("../interceptor"),o=e("../UrlBuilder"),r({request:function(e,r){var i;return r.prefix&&!new o(e.path).isFullyQualified()&&(i=r.prefix,e.path&&(n(i,"/")||t(e.path,"/")||(i+="/"),i+=e.path),e.path=i),e}})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../UrlBuilder":28,"../interceptor":33}],38:[function(e,t,n){!function(e){"use strict";e(function(e){var t,n,r;return t=e("../interceptor"),n=e("../util/uriTemplate"),r=e("../util/mixin"),t({init:function(e){return e.params=e.params||{},e.template=e.template||"",e},request:function(e,t){var o,i;return o=e.path||t.template,i=r({},e.params,t.params),e.path=n.expand(o,i),delete e.params,e}})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../interceptor":33,"../util/mixin":66,"../util/uriTemplate":70}],39:[function(e,t,n){!function(e){"use strict";var t;e(function(){function e(e){var n,r;return n=e.split(";"),r=n[0].trim().split("+"),{raw:e,type:r[0],suffix:r[1]?"+"+r[1]:"",params:n.slice(1).reduce(function(e,n){return n=n.split("="),e[n[0].trim()]=n[1]?n[1].trim():t,e},{})}}return{parse:e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],40:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e){this.lookup=function(t){var o;return o="string"==typeof t?n.parse(t):t,e[o.raw]?e[o.raw]:e[o.type+o.suffix]?e[o.type+o.suffix]:e[o.type]?e[o.type]:e[o.suffix]?e[o.suffix]:r.reject(new Error('Unable to locate converter for mime "'+o.raw+'"'))},this.delegate=function(e){return{read:function(){var t=arguments;return this.lookup(e).then(function(e){return e.read.apply(this,t)}.bind(this))}.bind(this),write:function(){var t=arguments;return this.lookup(e).then(function(e){return e.write.apply(this,t)}.bind(this))}.bind(this)}},this.register=function(t,n){return e[t]=r(n),e[t]},this.child=function(){return new t(Object.create(e))}}var n,r,o;return n=e("../mime"),r=e("when"),o=new t({}),o.register("application/hal",e("./type/application/hal")),o.register("application/json",e("./type/application/json")),o.register("application/x-www-form-urlencoded",e("./type/application/x-www-form-urlencoded")),o.register("multipart/form-data",e("./type/multipart/form-data")),o.register("text/plain",e("./type/text/plain")),o.register("+json",o.delegate("application/json")),o})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../mime":39,"./type/application/hal":41,"./type/application/json":42,"./type/application/x-www-form-urlencoded":43,"./type/multipart/form-data":44,"./type/text/plain":45,when:63}],41:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e,t,n){Object.defineProperty(e,t,{value:n,configurable:!0,enumerable:!1,writeable:!0})}var n,r,o,i,u,s;return n=e("../../../interceptor/pathPrefix"),r=e("../../../interceptor/template"),o=e("../../../util/find"),i=e("../../../util/lazyPromise"),u=e("../../../util/responsePromise"),s=e("when"),{read:function(e,c){function a(e,t){(t&&l&&l.warn||l.log)&&(l.warn||l.log).call(l,"Relationship '"+e+"' is deprecated, see "+t)}var f,l;return c=c||{},f=c.client,l=c.console||l,c.registry.lookup(c.mime.suffix).then(function(l){return s(l.read(e,c)).then(function(e){return o.findProperties(e,"_embedded",function(e,n,r){Object.keys(e).forEach(function(r){if(!(r in n)){var o=u({entity:e[r]});t(n,r,o)}}),t(n,r,e)}),o.findProperties(e,"_links",function(e,o,s){Object.keys(e).forEach(function(n){var s=e[n];n in o||t(o,n,u.make(i(function(){return s.deprecation&&a(n,s.deprecation),s.templated===!0?r(f)({path:s.href}):f({path:s.href})})))}),t(o,s,e),t(o,"clientFor",function(t,o){var i=e[t];if(!i)throw new Error("Unknown relationship: "+t);return i.deprecation&&a(t,i.deprecation),i.templated===!0?r(o||f,{template:i.href}):n(o||f,{prefix:i.href})}),t(o,"requestFor",function(e,t,n){var r=this.clientFor(e,n);return r(t)})}),e})})},write:function(e,t){return t.registry.lookup(t.mime.suffix).then(function(n){return n.write(e,t)})}}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../../../interceptor/pathPrefix":37,"../../../interceptor/template":38,"../../../util/find":64,"../../../util/lazyPromise":65,"../../../util/responsePromise":68,when:63}],42:[function(e,t,n){!function(e){"use strict";e(function(){function e(t,n){return{read:function(e){return JSON.parse(e,t)},write:function(e){return JSON.stringify(e,n)},extend:e}}return e()})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],43:[function(e,t,n){!function(e){"use strict";e(function(){function e(e){return e=encodeURIComponent(e),e.replace(r,"+")}function t(e){return e=e.replace(o," "),decodeURIComponent(e)}function n(t,r,o){return Array.isArray(o)?o.forEach(function(e){t=n(t,r,e)}):(t.length>0&&(t+="&"),t+=e(r),void 0!==o&&null!==o&&(t+="="+e(o))),t}var r,o;return r=/%20/g,o=/\+/g,{read:function(e){var n={};return e.split("&").forEach(function(e){var r,o,i;r=e.split("="),o=t(r[0]),i=2===r.length?t(r[1]):null,o in n?(Array.isArray(n[o])||(n[o]=[n[o]]),n[o].push(i)):n[o]=i}),n},write:function(e){var t="";return Object.keys(e).forEach(function(r){t=n(t,r,e[r])}),t}}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],44:[function(e,t,n){!function(e){"use strict";e(function(){function e(e){return e&&1===e.nodeType&&"FORM"===e.tagName}function t(e){var t,n=new FormData;for(var r in e)e.hasOwnProperty(r)&&(t=e[r],t instanceof File?n.append(r,t,t.name):t instanceof Blob?n.append(r,t):n.append(r,String(t)));return n}return{write:function(n){if("undefined"==typeof FormData)throw new Error("The multipart/form-data mime serializer requires FormData support");if(n instanceof FormData)return n;if(e(n))return new FormData(n);if("object"==typeof n&&null!==n)return t(n);throw new Error("Unable to create FormData from object "+n)}}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],45:[function(e,t,n){!function(e){"use strict";e(function(){return{read:function(e){return e},write:function(e){return e.toString()}}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],46:[function(e,t,n){!function(e){"use strict";e(function(e){var t=e("./makePromise"),n=e("./Scheduler"),r=e("./env").asap;return t({scheduler:new n(r)})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./Scheduler":47,"./env":59,"./makePromise":61}],47:[function(e,t,n){!function(e){"use strict";e(function(){function e(e){this._async=e,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}return e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e,this.run()},e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e,this.run()},e.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},e.prototype._drain=function(){for(var e=0;e<this._queueLen;++e)this._queue[e].run(),this._queue[e]=void 0;for(this._queueLen=0,this._running=!1,e=0;e<this._afterQueueLen;++e)this._afterQueue[e].run(),this._afterQueue[e]=void 0;this._afterQueueLen=0},e})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],48:[function(e,t,n){!function(e){"use strict";e(function(){function e(t){Error.call(this),this.message=t,this.name=e.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],49:[function(e,t,n){!function(e){"use strict";e(function(){function e(e,n){function r(t,r,i){var u=e._defer(),s=i.length,c=new Array(s);return o({f:t,thisArg:r,args:i,params:c,i:s-1,call:n},u._handler),u}function o(t,r){if(t.i<0)return n(t.f,t.thisArg,t.params,r);var o=e._handler(t.args[t.i]);o.fold(i,t,void 0,r)}function i(e,t,n){e.params[e.i]=t,e.i-=1,o(e,n)}return arguments.length<2&&(n=t),r}function t(e,t,n,r){try{r.resolve(e.apply(t,n))}catch(o){r.reject(o)}}return e.tryCatchResolve=t,e})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],50:[function(e,t,n){!function(e){"use strict";e(function(e){var t=e("../state"),n=e("../apply");return function(e){function r(t){function n(e){f=null,this.resolve(e)}function r(e){this.resolved||(f.push(e),0===--a&&this.reject(f))}for(var o,i,u=e._defer(),s=u._handler,c=t.length>>>0,a=c,f=[],l=0;c>l;++l)if(i=t[l],void 0!==i||l in t){if(o=e._handler(i),o.state()>0){s.become(o),e._visitRemaining(t,l,o);break}o.visit(s,n,r)}else--a;return 0===a&&s.reject(new RangeError("any(): array must not be empty")),u}function o(t,n){function r(e){this.resolved||(f.push(e),0===--d&&(l=null,this.resolve(f)))}function o(e){this.resolved||(l.push(e),0===--i&&(f=null,this.reject(l)))}var i,u,s,c=e._defer(),a=c._handler,f=[],l=[],p=t.length>>>0,d=0;for(s=0;p>s;++s)u=t[s],(void 0!==u||s in t)&&++d;for(n=Math.max(n,0),i=d-n+1,d=Math.min(n,d),n>d?a.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+d)):0===d&&a.resolve(f),s=0;p>s;++s)u=t[s],(void 0!==u||s in t)&&e._handler(u).visit(a,r,o,a.notify);return c}function i(t,n){return e._traverse(n,t)}function u(t,n){var r=g.call(t);return e._traverse(n,r).then(function(e){return s(r,e)})}function s(t,n){for(var r=n.length,o=new Array(r),i=0,u=0;r>i;++i)n[i]&&(o[u++]=e._handler(t[i]).value);return o.length=u,o}function c(e){return y(e.map(a))}function a(n){var r=e._handler(n);return 0===r.state()?h(n).then(t.fulfilled,t.rejected):(r._unreport(),t.inspect(r))}function f(e,t){return arguments.length>2?m.call(e,p(t),arguments[2]):m.call(e,p(t))}function l(e,t){return arguments.length>2?v.call(e,p(t),arguments[2]):v.call(e,p(t))}function p(e){return function(t,n,r){return d(e,void 0,[t,n,r])}}var d=n(e),h=e.resolve,y=e.all,m=Array.prototype.reduce,v=Array.prototype.reduceRight,g=Array.prototype.slice;return e.any=r,e.some=o,e.settle=c,e.map=i,e.filter=u,e.reduce=f,e.reduceRight=l,e.prototype.spread=function(e){return this.then(y).then(function(t){return e.apply(this,t)})},e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../apply":49,"../state":62}],51:[function(e,t,n){!function(e){"use strict";e(function(){function e(){throw new TypeError("catch predicate must be a function")}function t(e,t){return n(t)?e instanceof t:t(e)}function n(e){return e===Error||null!=e&&e.prototype instanceof Error}function r(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function o(e){return e}return function(n){function i(e,n){return function(r){return t(r,n)?e.call(this,r):a(r)}}function u(e,t,n,o){var i=e.call(t);return r(i)?s(i,n,o):n(o)}function s(e,t,n){return c(e).then(function(){return t(n)})}var c=n.resolve,a=n.reject,f=n.prototype["catch"];return n.prototype.done=function(e,t){this._handler.visit(this._handler.receiver,e,t)},n.prototype["catch"]=n.prototype.otherwise=function(t){return arguments.length<2?f.call(this,t):"function"!=typeof t?this.ensure(e):f.call(this,i(arguments[1],t))},n.prototype["finally"]=n.prototype.ensure=function(e){return"function"!=typeof e?this:this.then(function(t){return u(e,this,o,t)},function(t){return u(e,this,a,t)})},n.prototype["else"]=n.prototype.orElse=function(e){return this.then(void 0,function(){return e})},n.prototype["yield"]=function(e){return this.then(function(){return e})},n.prototype.tap=function(e){return this.then(e)["yield"](this)},n}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],52:[function(e,t,n){!function(e){"use strict";e(function(){return function(e){return e.prototype.fold=function(t,n){var r=this._beget();return this._handler.fold(function(n,r,o){e._handler(n).fold(function(e,n,r){r.resolve(t.call(this,n,e))},r,this,o)},n,r._handler.receiver,r._handler),r},e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],53:[function(e,t,n){!function(e){"use strict";e(function(e){var t=e("../state").inspect;return function(e){return e.prototype.inspect=function(){return t(e._handler(this))},e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../state":62}],54:[function(e,t,n){!function(e){"use strict";e(function(){return function(e){function t(e,t,r,o){return n(function(t){return[t,e(t)]},t,r,o)}function n(e,t,o,i){function u(i,u){return r(o(i)).then(function(){return n(e,t,o,u)})}return r(i).then(function(n){return r(t(n)).then(function(t){return t?n:r(e(n)).spread(u)})})}var r=e.resolve;return e.iterate=t,e.unfold=n,e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],55:[function(e,t,n){!function(e){"use strict";e(function(){return function(e){return e.prototype.progress=function(e){return this.then(void 0,void 0,e)},e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],56:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e,t,r,o){return n.setTimer(function(){e(r,o,t)},t)}var n=e("../env"),r=e("../TimeoutError");return function(e){function o(e,n,r){t(i,e,n,r)}function i(e,t){t.resolve(e)}function u(e,t,n){var o="undefined"==typeof e?new r("timed out after "+n+"ms"):e;t.reject(o)}return e.prototype.delay=function(e){var t=this._beget();return this._handler.fold(o,e,void 0,t._handler),t},e.prototype.timeout=function(e,r){var o=this._beget(),i=o._handler,s=t(u,e,r,o._handler);return this._handler.visit(i,function(e){n.clearTimer(s),this.resolve(e)},function(e){n.clearTimer(s),this.reject(e)},i.notify),o},e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../TimeoutError":48,"../env":59}],57:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e){throw e}function n(){}var r=e("../env").setTimer,o=e("../format");return function(e){function i(e){e.handled||(d.push(e),f("Potentially unhandled rejection ["+e.id+"] "+o.formatError(e.value)))}function u(e){var t=d.indexOf(e);t>=0&&(d.splice(t,1),l("Handled previous rejection ["+e.id+"] "+o.formatObject(e.value)))}function s(e,t){p.push(e,t),null===h&&(h=r(c,0))}function c(){for(h=null;p.length>0;)p.shift()(p.shift())}var a,f=n,l=n;"undefined"!=typeof console&&(a=console,f="undefined"!=typeof a.error?function(e){a.error(e)}:function(e){a.log(e)},l="undefined"!=typeof a.info?function(e){a.info(e)}:function(e){a.log(e)}),e.onPotentiallyUnhandledRejection=function(e){
s(i,e)},e.onPotentiallyUnhandledRejectionHandled=function(e){s(u,e)},e.onFatalRejection=function(e){s(t,e.value)};var p=[],d=[],h=null;return e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../env":59,"../format":60}],58:[function(e,t,n){!function(e){"use strict";e(function(){return function(e){return e.prototype["with"]=e.prototype.withThis=function(e){var t=this._beget(),n=t._handler;return n.receiver=e,this._handler.chain(n,e),t},e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],59:[function(e,t,n){(function(n){!function(e){"use strict";e(function(e){function t(){return"undefined"!=typeof n&&"[object process]"===Object.prototype.toString.call(n)}function r(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function o(e){function t(){var e=n;n=void 0,e()}var n,r=document.createTextNode(""),o=new e(t);o.observe(r,{characterData:!0});var i=0;return function(e){n=e,r.data=i^=1}}var i,u="undefined"!=typeof setTimeout&&setTimeout,s=function(e,t){return setTimeout(e,t)},c=function(e){return clearTimeout(e)},a=function(e){return u(e,0)};if(t())a=function(e){return n.nextTick(e)};else if(i=r())a=o(i);else if(!u){var f=e,l=f("vertx");s=function(e,t){return l.setTimer(t,e)},c=l.cancelTimer,a=l.runOnLoop||l.runOnContext}return{setTimer:s,clearTimer:c,asap:a}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})}).call(this,e("_process"))},{_process:7}],60:[function(e,t,n){!function(e){"use strict";e(function(){function e(e){var n="object"==typeof e&&null!==e&&(e.stack||e.message)?e.stack||e.message:t(e);return e instanceof Error?n:n+" (WARNING: non-Error used)"}function t(e){var t=String(e);return"[object Object]"===t&&"undefined"!=typeof JSON&&(t=n(e,t)),t}function n(e,t){try{return JSON.stringify(e)}catch(n){return t}}return{formatError:e,formatObject:t,tryStringify:n}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],61:[function(e,t,n){(function(e){!function(t){"use strict";t(function(){return function(t){function n(e,t){this._handler=e===w?t:r(e)}function r(e){function t(e){o.resolve(e)}function n(e){o.reject(e)}function r(e){o.notify(e)}var o=new x;try{e(t,n,r)}catch(i){n(i)}return o}function o(e){return I(e)?e:new n(w,new E(v(e)))}function i(e){return new n(w,new E(new S(e)))}function u(){return ee}function s(){return new n(w,new x)}function c(e,t){var n=new x(e.receiver,e.join().context);return new t(w,n)}function a(e){return l(G,null,e)}function f(e,t){return l(z,e,t)}function l(e,t,r){function o(n,o,u){u.resolved||p(r,i,n,e(t,o,n),u)}function i(e,t,n){f[e]=t,0===--a&&n.become(new A(f))}for(var u,s="function"==typeof t?o:i,c=new x,a=r.length>>>0,f=new Array(a),l=0;l<r.length&&!c.resolved;++l)u=r[l],void 0!==u||l in r?p(r,s,l,u,c):--a;return 0===a&&c.become(new A(f)),new n(w,c)}function p(e,t,n,r,o){if(D(r)){var i=g(r),u=i.state();0===u?i.fold(t,n,void 0,o):u>0?t(n,i.value,o):(o.become(i),d(e,n+1,i))}else t(n,r,o)}function d(e,t,n){for(var r=t;r<e.length;++r)h(v(e[r]),n)}function h(e,t){if(e!==t){var n=e.state();0===n?e.visit(e,void 0,e._unreport):0>n&&e._unreport()}}function y(e){return"object"!=typeof e||null===e?i(new TypeError("non-iterable passed to race()")):0===e.length?u():1===e.length?o(e[0]):m(e)}function m(e){var t,r,o,i=new x;for(t=0;t<e.length;++t)if(r=e[t],void 0!==r||t in e){if(o=v(r),0!==o.state()){i.become(o),d(e,t+1,o);break}o.visit(i,i.resolve,i.reject)}return new n(w,i)}function v(e){return I(e)?e._handler.join():D(e)?b(e):new A(e)}function g(e){return I(e)?e._handler.join():b(e)}function b(e){try{var t=e.then;return"function"==typeof t?new j(t,e):new A(e)}catch(n){return new S(n)}}function w(){}function _(){}function x(e,t){n.createContext(this,t),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function E(e){this.handler=e}function j(e,t){x.call(this),W.enqueue(new C(e,t,this))}function A(e){n.createContext(this),this.value=e}function S(e){n.createContext(this),this.id=++X,this.value=e,this.handled=!1,this.reported=!1,this._report()}function O(e,t){this.rejection=e,this.context=t}function T(e){this.rejection=e}function k(){return new S(new TypeError("Promise cycle"))}function L(e,t){this.continuation=e,this.handler=t}function P(e,t){this.handler=t,this.value=e}function C(e,t,n){this._then=e,this.thenable=t,this.resolver=n}function q(e,t,n,r,o){try{e.call(t,n,r,o)}catch(i){r(i)}}function R(e,t,n,r){this.f=e,this.z=t,this.c=n,this.to=r,this.resolver=K,this.receiver=this}function I(e){return e instanceof n}function D(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function F(e,t,r,o){return"function"!=typeof e?o.become(t):(n.enterContext(t),N(e,t.value,r,o),void n.exitContext())}function M(e,t,r,o,i){return"function"!=typeof e?i.become(r):(n.enterContext(r),B(e,t,r.value,o,i),void n.exitContext())}function U(e,t,r,o,i){return"function"!=typeof e?i.notify(t):(n.enterContext(r),H(e,t,o,i),void n.exitContext())}function z(e,t,n){try{return e(t,n)}catch(r){return i(r)}}function N(e,t,n,r){try{r.become(v(e.call(n,t)))}catch(o){r.become(new S(o))}}function B(e,t,n,r,o){try{e.call(r,t,n,o)}catch(i){o.become(new S(i))}}function H(e,t,n,r){try{r.notify(e.call(n,t))}catch(o){r.notify(o)}}function $(e,t){t.prototype=Z(e.prototype),t.prototype.constructor=t}function G(e,t){return t}function J(){}function Q(){return"undefined"!=typeof e&&null!==e&&"function"==typeof e.emit?function(t,n){return"unhandledRejection"===t?e.emit(t,n.value,n):e.emit(t,n)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(e,t,n){var r=!1;try{var o=new n("unhandledRejection");r=o instanceof n}catch(i){}return r?function(e,r){var o=new n(e,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!t.dispatchEvent(o)}:e}(J,self,CustomEvent):J}var W=t.scheduler,Y=Q(),Z=Object.create||function(e){function t(){}return t.prototype=e,new t};n.resolve=o,n.reject=i,n.never=u,n._defer=s,n._handler=v,n.prototype.then=function(e,t,n){var r=this._handler,o=r.join().state();if("function"!=typeof e&&o>0||"function"!=typeof t&&0>o)return new this.constructor(w,r);var i=this._beget(),u=i._handler;return r.chain(u,r.receiver,e,t,n),i},n.prototype["catch"]=function(e){return this.then(void 0,e)},n.prototype._beget=function(){return c(this._handler,this.constructor)},n.all=a,n.race=y,n._traverse=f,n._visitRemaining=d,w.prototype.when=w.prototype.become=w.prototype.notify=w.prototype.fail=w.prototype._unreport=w.prototype._report=J,w.prototype._state=0,w.prototype.state=function(){return this._state},w.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},w.prototype.chain=function(e,t,n,r,o){this.when({resolver:e,receiver:t,fulfilled:n,rejected:r,progress:o})},w.prototype.visit=function(e,t,n,r){this.chain(K,e,t,n,r)},w.prototype.fold=function(e,t,n,r){this.when(new R(e,t,n,r))},$(w,_),_.prototype.become=function(e){e.fail()};var K=new _;$(w,x),x.prototype._state=0,x.prototype.resolve=function(e){this.become(v(e))},x.prototype.reject=function(e){this.resolved||this.become(new S(e))},x.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if(e=e.handler,e===this)return this.handler=k();return e},x.prototype.run=function(){var e=this.consumers,t=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<e.length;++n)t.when(e[n])},x.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&W.enqueue(this),void 0!==this.context&&e._report(this.context))},x.prototype.when=function(e){this.resolved?W.enqueue(new L(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},x.prototype.notify=function(e){this.resolved||W.enqueue(new P(e,this))},x.prototype.fail=function(e){var t="undefined"==typeof e?this.context:e;this.resolved&&this.handler.join().fail(t)},x.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},x.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},$(w,E),E.prototype.when=function(e){W.enqueue(new L(e,this))},E.prototype._report=function(e){this.join()._report(e)},E.prototype._unreport=function(){this.join()._unreport()},$(x,j),$(w,A),A.prototype._state=1,A.prototype.fold=function(e,t,n,r){M(e,t,this,n,r)},A.prototype.when=function(e){F(e.fulfilled,this,e.receiver,e.resolver)};var X=0;$(w,S),S.prototype._state=-1,S.prototype.fold=function(e,t,n,r){r.become(this)},S.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),F(e.rejected,this,e.receiver,e.resolver)},S.prototype._report=function(e){W.afterQueue(new O(this,e))},S.prototype._unreport=function(){this.handled||(this.handled=!0,W.afterQueue(new T(this)))},S.prototype.fail=function(e){this.reported=!0,Y("unhandledRejection",this),n.onFatalRejection(this,void 0===e?this.context:e)},O.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,Y("unhandledRejection",this.rejection)||n.onPotentiallyUnhandledRejection(this.rejection,this.context))},T.prototype.run=function(){this.rejection.reported&&(Y("rejectionHandled",this.rejection)||n.onPotentiallyUnhandledRejectionHandled(this.rejection))},n.createContext=n.enterContext=n.exitContext=n.onPotentiallyUnhandledRejection=n.onPotentiallyUnhandledRejectionHandled=n.onFatalRejection=J;var V=new w,ee=new n(w,V);return L.prototype.run=function(){this.handler.join().when(this.continuation)},P.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,n=0;n<e.length;++n)t=e[n],U(t.progress,this.value,this.handler,t.receiver,t.resolver)},C.prototype.run=function(){function e(e){r.resolve(e)}function t(e){r.reject(e)}function n(e){r.notify(e)}var r=this.resolver;q(this._then,this.thenable,e,t,n)},R.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)},R.prototype.rejected=function(e){this.to.reject(e)},R.prototype.progress=function(e){this.to.notify(e)},n}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})}).call(this,e("_process"))},{_process:7}],62:[function(e,t,n){!function(e){"use strict";e(function(){function e(){return{state:"pending"}}function t(e){return{state:"rejected",reason:e}}function n(e){return{state:"fulfilled",value:e}}function r(r){var o=r.state();return 0===o?e():o>0?n(r.value):t(r.value)}return{pending:e,fulfilled:n,rejected:t,inspect:r}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],63:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e,t,n,r){var o=E.resolve(e);return arguments.length<2?o:o.then(t,n,r)}function n(e){return new E(e)}function r(e){return function(){for(var t=0,n=arguments.length,r=new Array(n);n>t;++t)r[t]=arguments[t];return j(e,this,r)}}function o(e){for(var t=0,n=arguments.length-1,r=new Array(n);n>t;++t)r[t]=arguments[t+1];return j(e,this,r)}function i(){return new u}function u(){function e(e){r._handler.resolve(e)}function t(e){r._handler.reject(e)}function n(e){r._handler.notify(e)}var r=E._defer();this.promise=r,this.resolve=e,this.reject=t,this.notify=n,this.resolver={resolve:e,reject:t,notify:n}}function s(e){return e&&"function"==typeof e.then}function c(){return E.all(arguments)}function a(e){return t(e,E.all)}function f(e){return t(e,E.settle)}function l(e,n){return t(e,function(e){return E.map(e,n)})}function p(e,n){return t(e,function(e){return E.filter(e,n)})}var d=e("./lib/decorators/timed"),h=e("./lib/decorators/array"),y=e("./lib/decorators/flow"),m=e("./lib/decorators/fold"),v=e("./lib/decorators/inspect"),g=e("./lib/decorators/iterate"),b=e("./lib/decorators/progress"),w=e("./lib/decorators/with"),_=e("./lib/decorators/unhandledRejection"),x=e("./lib/TimeoutError"),E=[h,y,m,g,b,v,w,d,_].reduce(function(e,t){return t(e)},e("./lib/Promise")),j=e("./lib/apply")(E);return t.promise=n,t.resolve=E.resolve,t.reject=E.reject,t.lift=r,t["try"]=o,t.attempt=o,t.iterate=E.iterate,t.unfold=E.unfold,t.join=c,t.all=a,t.settle=f,t.any=r(E.any),t.some=r(E.some),t.race=r(E.race),t.map=l,t.filter=p,t.reduce=r(E.reduce),t.reduceRight=r(E.reduceRight),t.isPromiseLike=s,t.Promise=E,t.defer=i,t.TimeoutError=x,t})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./lib/Promise":46,"./lib/TimeoutError":48,"./lib/apply":49,"./lib/decorators/array":50,"./lib/decorators/flow":51,"./lib/decorators/fold":52,"./lib/decorators/inspect":53,"./lib/decorators/iterate":54,"./lib/decorators/progress":55,"./lib/decorators/timed":56,"./lib/decorators/unhandledRejection":57,"./lib/decorators/with":58}],64:[function(e,t,n){!function(e){"use strict";e(function(){return{findProperties:function e(t,n,r){"object"==typeof t&&null!==t&&(n in t&&r(t[n],t,n),Object.keys(t).forEach(function(o){e(t[o],n,r)}))}}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],65:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e){var t,r,o,i,u;return t=n.defer(),r=!1,o=t.resolver,i=t.promise,u=i.then,i.then=function(){return r||(r=!0,n.attempt(e).then(o.resolve,o.reject)),u.apply(i,arguments)},i}var n;return n=e("when"),t})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{when:63}],66:[function(e,t,n){!function(e){"use strict";e(function(){function e(e){var n,r,o,i;for(e||(e={}),n=1,r=arguments.length;r>n;n+=1){o=arguments[n];for(i in o)i in e&&(e[i]===o[i]||i in t&&t[i]===o[i])||(e[i]=o[i])}return e}var t={};return e})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],67:[function(e,t,n){!function(e){"use strict";e(function(){function e(e){return e.toLowerCase().split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join("-")}return e})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],68:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e,t){return e.then(function(e){return e&&e[t]},function(e){return a.reject(e&&e[t])})}function n(){return t(this,"entity")}function r(){return t(t(this,"status"),"code")}function o(){return t(this,"headers")}function i(e){return e=f(e),t(this.headers(),e)}function u(e){return e=[].concat(e),s(a.reduce(e,function(e,t){if("string"==typeof t&&(t={rel:t}),"function"!=typeof e.entity.clientFor)throw new Error("Hypermedia response expected");var n=e.entity.clientFor(t.rel);return n({params:t.params})},this))}function s(e){return e.status=r,e.headers=o,e.header=i,e.entity=n,e.follow=u,e}function c(){return s(a.apply(a,arguments))}var a=e("when"),f=e("./normalizeHeaderName");return c.make=s,c.reject=function(e){return s(a.reject(e))},c.promise=function(e){return s(a.promise(e))},c})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./normalizeHeaderName":67,when:63}],69:[function(e,t,n){!function(e){"use strict";e(function(){function e(e,t){if("string"!=typeof e)throw new Error("String required for URL encoding");return e.split("").map(function(e){if(t.hasOwnProperty(e))return e;var n=e.charCodeAt(0);return 127>=n?"%"+n.toString(16).toUpperCase():encodeURIComponent(e).toUpperCase()}).join("")}function t(t){return t=t||r.unreserved,function(n){return e(n,t)}}function n(e){return decodeURIComponent(e)}var r;return r=function(){var e={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789"};return e.genDelims=":/?#[]@",e.subDelims="!$&'()*+,;=",e.reserved=e.genDelims+e.subDelims,e.unreserved=e.alpha+e.digit+"-._~",e.url=e.reserved+e.unreserved,e.scheme=e.alpha+e.digit+"+-.",e.userinfo=e.unreserved+e.subDelims+":",e.host=e.unreserved+e.subDelims,e.port=e.digit,e.pchar=e.unreserved+e.subDelims+":@",e.segment=e.pchar,e.path=e.segment+"/",e.query=e.pchar+"/?",e.fragment=e.pchar+"/?",Object.keys(e).reduce(function(t,n){return t[n]=e[n].split("").reduce(function(e,t){return e[t]=!0,e},{}),t},{})}(),{decode:n,encode:t(),encodeURL:t(r.url),encodeScheme:t(r.scheme),encodeUserInfo:t(r.userinfo),encodeHost:t(r.host),encodePort:t(r.port),encodePathSegment:t(r.segment),encodePath:t(r.path),encodeQuery:t(r.query),encodeFragment:t(r.fragment)}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{}],70:[function(e,t,n){!function(e){"use strict";var t;e(function(e){function n(e,n,r){return n.split(",").reduce(function(n,o){var u,c;if(u={},"*"===o.slice(-1)&&(o=o.slice(0,-1),u.explode=!0),s.test(o)){var a=s.exec(o);o=a[1],u.maxLength=parseInt(a[2])}return o=i.decode(o),c=r[o],c===t||null===c?n:(Array.isArray(c)?n+=c.reduce(function(t,n){return t.length?(t+=u.explode?e.separator:",",e.named&&u.explode&&(t+=e.encoder(o),t+=n.length?"=":e.empty)):(t+=e.first,e.named&&(t+=e.encoder(o),t+=n.length?"=":e.empty)),t+=e.encoder(n)},""):"object"==typeof c?n+=Object.keys(c).reduce(function(t,n){return t.length?t+=u.explode?e.separator:",":(t+=e.first,e.named&&!u.explode&&(t+=e.encoder(o),t+=c[n].length?"=":e.empty)),t+=e.encoder(n),t+=u.explode?"=":",",t+=e.encoder(c[n])},""):(c=String(c),u.maxLength&&(c=c.slice(0,u.maxLength)),n+=n.length?e.separator:e.first,e.named&&(n+=e.encoder(o),n+=c.length?"=":e.empty),n+=e.encoder(c)),n)},"")}function r(e,t){var r;if(r=u[e.slice(0,1)],r?e=e.slice(1):r=u[""],r.reserved)throw new Error("Reserved expression operations are not supported");return n(r,e,t)}function o(e,t){var n,o,i;for(i="",o=0;;){if(n=e.indexOf("{",o),-1===n){i+=e.slice(o);break}i+=e.slice(o,n),o=e.indexOf("}",n)+1,i+=r(e.slice(n+1,o-1),t)}return i}var i,u,s;return i=e("./uriEncoder"),s=/^([^:]*):([0-9]+)$/,u={"":{first:"",separator:",",named:!1,empty:"",encoder:i.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:i.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:i.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:i.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:i.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:i.encode},"?":{first:"?",separator:"&",named:!0,empty:"=",encoder:i.encode},"&":{first:"&",separator:"&",named:!0,empty:"=",encoder:i.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}},{expand:o}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./uriEncoder":69}],71:[function(e,t,n){!function(){function e(e){if(!Array.isArray(e))throw new TypeError("You need to pass an Array not "+typeof e);if(1==e.length)return e[0];e.sort(function(e,t){return e-t});var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}"undefined"!=typeof t&&t.exports?t.exports=e:window.median=e}()},{}],72:[function(e,t,n){"use strict";function r(e,t){e=Math.round(e*t),e<<=1,0>e&&(e=~e);for(var n="";e>=32;)n+=String.fromCharCode((32|31&e)+63),e>>=5;return n+=String.fromCharCode(e+63)}function o(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice().reverse());return t}var i={};i.decode=function(e,t){for(var n,r,o=0,i=0,u=0,s=[],c=0,a=0,f=null,l=Math.pow(10,t||5);o<e.length;){f=null,c=0,a=0;do f=e.charCodeAt(o++)-63,a|=(31&f)<<c,c+=5;while(f>=32);n=1&a?~(a>>1):a>>1,c=a=0;do f=e.charCodeAt(o++)-63,a|=(31&f)<<c,c+=5;while(f>=32);r=1&a?~(a>>1):a>>1,i+=n,u+=r,s.push([i/l,u/l])}return s},i.encode=function(e,t){if(!e.length)return"";for(var n=Math.pow(10,t||5),o=r(e[0][0],n)+r(e[0][1],n),i=1;i<e.length;i++){var u=e[i],s=e[i-1];o+=r(u[0]-s[0],n),o+=r(u[1]-s[1],n)}return o},i.fromGeoJSON=function(e,t){if(e&&"Feature"===e.type&&(e=e.geometry),!e||"LineString"!==e.type)throw new Error("Input must be a GeoJSON LineString");return i.encode(o(e.coordinates),t)},i.toGeoJSON=function(e,t){var n=i.decode(e,t);return{type:"LineString",coordinates:o(n)}},"object"==typeof t&&t.exports&&(t.exports=i)},{}],73:[function(e,t,n){var r=e("turf-meta").coordEach,o=e("turf-point");t.exports=function(e){var t=0,n=0,i=0;return r(e,function(e){t+=e[0],n+=e[1],i++},!0),o([t/i,n/i])}},{"turf-meta":74,"turf-point":75}],74:[function(e,t,n){function r(e,t,n){var r,o,i,u,s,c,a,f,p,d=0,h="FeatureCollection"===e.type,y="Feature"===e.type,m=h?e.features.length:1;for(r=0;m>r;r++)for(f=h?e.features[r].geometry:y?e.geometry:e,p="GeometryCollection"===f.type,c=p?f.geometries.length:1,u=0;c>u;u++)if(s=p?f.geometries[u]:f,a=s.coordinates,d=!n||"Polygon"!==s.type&&"MultiPolygon"!==s.type?0:1,"Point"===s.type)t(a);else if("LineString"===s.type||"MultiPoint"===s.type)for(o=0;o<a.length;o++)t(a[o]);else if("Polygon"===s.type||"MultiLineString"===s.type)for(o=0;o<a.length;o++)for(i=0;i<a[o].length-d;i++)t(a[o][i]);else{if("MultiPolygon"!==s.type)throw new Error("Unknown Geometry Type");for(o=0;o<a.length;o++)for(i=0;i<a[o].length;i++)for(l=0;l<a[o][i].length-d;l++)t(a[o][i][l])}}function o(e,t,n,o){return r(e,function(e){n=t(n,e)},o),n}function i(e,t){var n;switch(e.type){case"FeatureCollection":for(features=e.features,n=0;n<e.features.length;n++)t(e.features[n].properties);break;case"Feature":t(e.properties)}}function u(e,t,n){return i(e,function(e){n=t(n,e)}),n}t.exports.coordEach=r,t.exports.coordReduce=o,t.exports.propEach=i,t.exports.propReduce=u},{}],75:[function(e,t,n){var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e,t){if(!r(e))throw new Error("Coordinates must be an array");if(e.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:t||{}}}},{}],76:[function(e,t,n){function r(e,t){for(var n=[],r=0;6>r;r++){var o=e[0]+t*c[r],u=e[1]+t*a[r];n.push([o,u])}return n.push(n[0]),i([n])}for(var o=e("turf-point"),i=e("turf-polygon"),u=e("turf-distance"),s=e("turf-featurecollection"),c=[],a=[],f=0;6>f;f++){var l=2*Math.PI/6*f;c.push(Math.cos(l)),a.push(Math.sin(l))}t.exports=function(e,t,n){var i=t/u(o([e[0],e[1]]),o([e[2],e[1]]),n),c=i*(e[2]-e[0]),a=t/u(o([e[0],e[1]]),o([e[0],e[3]]),n),f=(a*(e[3]-e[1]),c/2),l=2*f,p=Math.sqrt(3)/2*l,d=e[2]-e[0],h=e[3]-e[1],y=.75*l,m=p,v=d/(l-f/2),g=Math.ceil(v);Math.round(v)===g&&g++;var b=(g*y-f/2-d)/2-f/2,w=Math.ceil(h/p),_=(h-w*p)/2,x=w*p-h>p/2;x&&(_-=p/4);for(var E=s([]),j=0;g>j;j++)for(var A=0;w>=A;A++){var S=j%2===1;if(!(0===A&&S||0===A&&x)){var O=j*y+e[0]-b,T=A*m+e[1]+_;S&&(T-=p/2),E.features.push(r([O,T],f))}}return E}},{"turf-distance":77,"turf-featurecollection":79,"turf-point":80,"turf-polygon":81}],77:[function(e,t,n){function r(e){return e*Math.PI/180}var o=e("turf-invariant");t.exports=function(e,t,n){o.featureOf(e,"Point","distance"),o.featureOf(t,"Point","distance");var i,u=e.geometry.coordinates,s=t.geometry.coordinates,c=r(s[1]-u[1]),a=r(s[0]-u[0]),f=r(u[1]),l=r(s[1]),p=Math.pow(Math.sin(c/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(f)*Math.cos(l),d=2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p));switch(n){case"miles":i=3960;break;case"kilometers":case"kilometres":i=6373;break;case"degrees":i=57.2957795;break;case"radians":i=1;break;case void 0:i=6373;break;default:throw new Error('unknown option given to "units"')}var h=i*d;return h}},{"turf-invariant":78}],78:[function(e,t,n){function r(e,t,n){if(!t||!n)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.type)}function o(e,t,n){if(!n)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)}function i(e,t,n){if(!n)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<e.features.length;r++){var o=e.features[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+o.geometry.type)}}t.exports.geojsonType=r,t.exports.collectionOf=i,t.exports.featureOf=o},{}],79:[function(e,t,n){t.exports=function(e){return{type:"FeatureCollection",features:e}}},{}],80:[function(e,t,n){arguments[4][75][0].apply(n,arguments)},{dup:75}],81:[function(e,t,n){t.exports=function(e,t){if(null===e)throw new Error("No coordinates passed");for(var n=0;n<e.length;n++)for(var r=e[n],o=0;o<r[r.length-1].length;o++){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1][o]!==r[0][o])throw new Error("First and last Position are not equivalent.")}var i={type:"Feature",geometry:{type:"Polygon",coordinates:e},properties:t};return i.properties||(i.properties={}),i}},{}]},{},[2]);
